import{_ as a,c as n,o as p,L as l}from"./chunks/framework.DdPzwmCl.js";const o="/assets/example_remult-next-swagger-ui-page.CeW-IlH3.png",A=JSON.parse('{"title":"Adding Swagger and openApi","description":"","frontmatter":{},"headers":[],"relativePath":"docs/adding-swagger.md","filePath":"docs/adding-swagger.md","lastUpdated":1746265022000}'),e={name:"docs/adding-swagger.md"};function t(c,s,r,F,y,i){return p(),n("div",null,s[0]||(s[0]=[l(`<h1 id="adding-swagger-and-openapi" tabindex="-1">Adding Swagger and openApi <a class="header-anchor" href="#adding-swagger-and-openapi" aria-label="Permalink to &quot;Adding Swagger and openApi&quot;">â€‹</a></h1><p>In short, swagger provides a quick UI that describes the api which is exposed by the application.</p><p>To add swagger to a <code>remult</code> application follow these steps:</p><ol><li><p>Install the <code>swagger-ui-express</code> package:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki tokyo-night vp-code" style="background-color:#1a1b26;color:#a9b1d6;" tabindex="0"><code><span class="line"><span style="color:#C0CAF5;">npm</span><span style="color:#9ECE6A;"> i</span><span style="color:#9ECE6A;"> swagger-ui-express</span></span>
<span class="line"><span style="color:#C0CAF5;">npm</span><span style="color:#9ECE6A;"> i</span><span style="color:#E0AF68;"> --save-dev</span><span style="color:#9ECE6A;"> @types/swagger-ui-express</span></span></code></pre></div></li><li><p>In the <code>/src/server/index.ts</code> file add the following code:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki tokyo-night vp-code" style="background-color:#1a1b26;color:#a9b1d6;" tabindex="0"><code><span class="line"><span style="color:#7DCFFF;">import</span><span style="color:#0DB9D7;"> express</span><span style="color:#7DCFFF;"> from</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">express</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line highlighted"><span style="color:#7DCFFF;">import</span><span style="color:#0DB9D7;"> swaggerUi</span><span style="color:#7DCFFF;"> from</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">swagger-ui-express</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#7DCFFF;">import</span><span style="color:#9ABDF5;"> { </span><span style="color:#0DB9D7;">remultApi</span><span style="color:#9ABDF5;"> }</span><span style="color:#7DCFFF;"> from</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">remult/remult-express</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9D7CD8;font-style:italic;">const</span><span style="color:#BB9AF7;"> app</span><span style="color:#89DDFF;"> =</span><span style="color:#7AA2F7;"> express</span><span style="color:#9ABDF5;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line highlighted"><span style="color:#9D7CD8;font-style:italic;">let</span><span style="color:#BB9AF7;"> api</span><span style="color:#89DDFF;"> =</span><span style="color:#7AA2F7;"> remultApi</span><span style="color:#9ABDF5;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#C0CAF5;">app</span><span style="color:#89DDFF;">.</span><span style="color:#7AA2F7;">use</span><span style="color:#9ABDF5;">(</span><span style="color:#C0CAF5;">api</span><span style="color:#9ABDF5;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line highlighted"><span style="color:#9D7CD8;font-style:italic;">const</span><span style="color:#BB9AF7;"> openApiDocument</span><span style="color:#89DDFF;"> =</span><span style="color:#C0CAF5;"> api</span><span style="color:#89DDFF;">.</span><span style="color:#7AA2F7;">openApiDoc</span><span style="color:#9ABDF5;">({</span><span style="color:#73DACA;"> title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#9ECE6A;">remult-react-todo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#9ABDF5;"> })</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C0CAF5;">app</span><span style="color:#89DDFF;">.</span><span style="color:#7AA2F7;">get</span><span style="color:#9ABDF5;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#9ECE6A;">/api/openApi.json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#9ABDF5;"> (</span><span style="color:#E0AF68;">req</span><span style="color:#89DDFF;">,</span><span style="color:#E0AF68;"> res</span><span style="color:#9ABDF5;">)</span><span style="color:#BB9AF7;"> =&gt;</span><span style="color:#9ABDF5;"> {</span><span style="color:#C0CAF5;">res</span><span style="color:#89DDFF;">.</span><span style="color:#7AA2F7;">json</span><span style="color:#9ABDF5;">(</span><span style="color:#C0CAF5;">openApiDocument</span><span style="color:#9ABDF5;">)})</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C0CAF5;">app</span><span style="color:#89DDFF;">.</span><span style="color:#7AA2F7;">use</span><span style="color:#9ABDF5;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#9ECE6A;">/api/docs</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#C0CAF5;"> swaggerUi</span><span style="color:#89DDFF;">.</span><span style="color:#7DCFFF;">serve</span><span style="color:#89DDFF;">,</span><span style="color:#C0CAF5;"> swaggerUi</span><span style="color:#89DDFF;">.</span><span style="color:#7AA2F7;">setup</span><span style="color:#9ABDF5;">(</span><span style="color:#C0CAF5;">openApiDocument</span><span style="color:#9ABDF5;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C0CAF5;">app</span><span style="color:#89DDFF;">.</span><span style="color:#7AA2F7;">listen</span><span style="color:#9ABDF5;">(</span><span style="color:#FF9E64;">3002</span><span style="color:#89DDFF;">,</span><span style="color:#9ABDF5;"> ()</span><span style="color:#BB9AF7;"> =&gt;</span><span style="color:#C0CAF5;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#7AA2F7;">log</span><span style="color:#9ABDF5;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#9ECE6A;">Server started</span><span style="color:#89DDFF;">&quot;</span><span style="color:#9ABDF5;">))</span><span style="color:#89DDFF;">;</span></span></code></pre></div></li></ol><h2 id="adding-swagger-ui-to-a-nextjs-app" tabindex="-1">Adding Swagger UI to a NextJs App <a class="header-anchor" href="#adding-swagger-ui-to-a-nextjs-app" aria-label="Permalink to &quot;Adding Swagger UI to a NextJs App&quot;">â€‹</a></h2><p>To add swagger UI to a <code>NextJs</code> application follow these steps:</p><ol><li><p>Install the following packages:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki tokyo-night vp-code" style="background-color:#1a1b26;color:#a9b1d6;" tabindex="0"><code><span class="line"><span style="color:#51597D;font-style:italic;"># With npm</span></span>
<span class="line"><span style="color:#C0CAF5;">npm</span><span style="color:#9ECE6A;"> i</span><span style="color:#9ECE6A;"> swagger-ui-react</span></span>
<span class="line"><span style="color:#C0CAF5;">npm</span><span style="color:#9ECE6A;"> i</span><span style="color:#E0AF68;"> -D</span><span style="color:#9ECE6A;"> @types/swagger-ui-react</span></span>
<span class="line"></span>
<span class="line"><span style="color:#51597D;font-style:italic;"># With yarn</span></span>
<span class="line"><span style="color:#C0CAF5;">yarn</span><span style="color:#9ECE6A;"> add</span><span style="color:#9ECE6A;"> swagger-ui-react</span></span>
<span class="line"><span style="color:#C0CAF5;">yarn</span><span style="color:#9ECE6A;"> add</span><span style="color:#E0AF68;"> -D</span><span style="color:#9ECE6A;"> @types/swagger-ui-react</span></span></code></pre></div></li><li><p>Get the openApi document from remultApiServer:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki tokyo-night vp-code" style="background-color:#1a1b26;color:#a9b1d6;" tabindex="0"><code><span class="line"><span style="color:#51597D;font-style:italic;">// src/api.ts</span></span>
<span class="line"><span style="color:#7DCFFF;">import</span><span style="color:#9ABDF5;"> { </span><span style="color:#0DB9D7;">Task</span><span style="color:#9ABDF5;"> }</span><span style="color:#7DCFFF;"> from</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">@/shared/Task</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#7DCFFF;">import</span><span style="color:#9ABDF5;"> { </span><span style="color:#0DB9D7;">TasksController</span><span style="color:#9ABDF5;"> }</span><span style="color:#7DCFFF;"> from</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">@/shared/TasksController</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#7DCFFF;">import</span><span style="color:#9ABDF5;"> { </span><span style="color:#0DB9D7;">remultApi</span><span style="color:#9ABDF5;"> }</span><span style="color:#7DCFFF;"> from</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">remult/remult-next</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7DCFFF;">export</span><span style="color:#9D7CD8;font-style:italic;"> const</span><span style="color:#BB9AF7;"> api</span><span style="color:#89DDFF;"> =</span><span style="color:#7AA2F7;"> remultApi</span><span style="color:#9ABDF5;">({</span></span>
<span class="line"><span style="color:#73DACA;">  admin</span><span style="color:#89DDFF;">:</span><span style="color:#FF9E64;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#73DACA;">  entities</span><span style="color:#89DDFF;">:</span><span style="color:#9ABDF5;"> [</span><span style="color:#7DCFFF;">Task</span><span style="color:#9ABDF5;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#73DACA;">  controllers</span><span style="color:#89DDFF;">:</span><span style="color:#9ABDF5;"> [</span><span style="color:#7DCFFF;">TasksController</span><span style="color:#9ABDF5;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#9ABDF5;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#51597D;font-style:italic;">// Export this here ðŸ‘‡</span></span>
<span class="line"><span style="color:#7DCFFF;">export</span><span style="color:#9D7CD8;font-style:italic;"> const</span><span style="color:#BB9AF7;"> openApiDoc</span><span style="color:#89DDFF;"> =</span><span style="color:#C0CAF5;"> api</span><span style="color:#89DDFF;">.</span><span style="color:#7AA2F7;">openApiDoc</span><span style="color:#9ABDF5;">({</span></span>
<span class="line"><span style="color:#73DACA;">  title</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">Todo App</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#9ABDF5;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7DCFFF;">export</span><span style="color:#9D7CD8;font-style:italic;"> const</span><span style="color:#89DDFF;"> {</span><span style="color:#BB9AF7;"> POST</span><span style="color:#89DDFF;">,</span><span style="color:#BB9AF7;"> PUT</span><span style="color:#89DDFF;">,</span><span style="color:#BB9AF7;"> DELETE</span><span style="color:#89DDFF;">,</span><span style="color:#BB9AF7;"> GET</span><span style="color:#89DDFF;"> }</span><span style="color:#89DDFF;"> =</span><span style="color:#C0CAF5;"> api</span></span></code></pre></div></li><li><p>Create a new page to render Swagger UI:</p><div class="language-tsx"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki tokyo-night vp-code" style="background-color:#1a1b26;color:#a9b1d6;" tabindex="0"><code><span class="line"><span style="color:#51597D;font-style:italic;">// src/app/api-doc/page.tsx</span></span>
<span class="line"><span style="color:#7DCFFF;">import</span><span style="color:#9ABDF5;"> { </span><span style="color:#0DB9D7;">openApiDoc</span><span style="color:#9ABDF5;"> }</span><span style="color:#7DCFFF;"> from</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">@/api</span><span style="color:#89DDFF;">&#39;</span><span style="color:#51597D;font-style:italic;"> // ðŸ‘ˆ Import the openApiDoc you exported earlier</span></span>
<span class="line"><span style="color:#7DCFFF;">import</span><span style="color:#0DB9D7;"> ReactSwagger</span><span style="color:#7DCFFF;"> from</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">./react-swagger</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7DCFFF;">export</span><span style="color:#7DCFFF;"> default</span><span style="color:#9D7CD8;font-style:italic;"> async</span><span style="color:#BB9AF7;"> function</span><span style="color:#7AA2F7;"> IndexPage</span><span style="color:#9ABDF5;">()</span><span style="color:#9ABDF5;"> {</span></span>
<span class="line"><span style="color:#BB9AF7;font-style:italic;">  return</span><span style="color:#9ABDF5;"> (</span></span>
<span class="line"><span style="color:#BA3C97;">    &lt;</span><span style="color:#F7768E;">section</span><span style="color:#BB9AF7;"> className</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#9ECE6A;">container</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BA3C97;">&gt;</span></span>
<span class="line"><span style="color:#BA3C97;">      &lt;</span><span style="color:#DE5971;">ReactSwagger </span><span style="color:#BB9AF7;">spec</span><span style="color:#89DDFF;">=</span><span style="color:#7DCFFF;">{</span><span style="color:#C0CAF5;">openApiDoc</span><span style="color:#7DCFFF;">}</span><span style="color:#BA3C97;"> /&gt;</span></span>
<span class="line"><span style="color:#BA3C97;">    &lt;/</span><span style="color:#F7768E;">section</span><span style="color:#BA3C97;">&gt;</span></span>
<span class="line"><span style="color:#9ABDF5;">  )</span></span>
<span class="line"><span style="color:#9ABDF5;">}</span></span></code></pre></div><div class="language-tsx"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki tokyo-night vp-code" style="background-color:#1a1b26;color:#a9b1d6;" tabindex="0"><code><span class="line"><span style="color:#51597D;font-style:italic;">// src/app/api-doc/react-swagger.tsx</span></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#9ECE6A;">use client</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7DCFFF;">import</span><span style="color:#0DB9D7;"> SwaggerUI</span><span style="color:#7DCFFF;"> from</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">swagger-ui-react</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#7DCFFF;">import</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#9ECE6A;">swagger-ui-react/swagger-ui.css</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BB9AF7;">type</span><span style="color:#C0CAF5;"> Props</span><span style="color:#89DDFF;"> =</span><span style="color:#9ABDF5;"> {</span></span>
<span class="line"><span style="color:#C0CAF5;">  spec</span><span style="color:#89DDFF;">:</span><span style="color:#C0CAF5;"> Record</span><span style="color:#89DDFF;">&lt;</span><span style="color:#0DB9D7;">string</span><span style="color:#89DDFF;">,</span><span style="color:#0DB9D7;"> any</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#9ABDF5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BB9AF7;">function</span><span style="color:#7AA2F7;"> ReactSwagger</span><span style="color:#9ABDF5;">(</span><span style="color:#89DDFF;">{</span><span style="color:#E0AF68;"> spec</span><span style="color:#89DDFF;"> }:</span><span style="color:#C0CAF5;"> Props</span><span style="color:#9ABDF5;">)</span><span style="color:#9ABDF5;"> {</span></span>
<span class="line"><span style="color:#BB9AF7;font-style:italic;">  return</span><span style="color:#BA3C97;"> &lt;</span><span style="color:#DE5971;">SwaggerUI </span><span style="color:#BB9AF7;">spec</span><span style="color:#89DDFF;">=</span><span style="color:#7DCFFF;">{</span><span style="color:#C0CAF5;">spec</span><span style="color:#7DCFFF;">}</span><span style="color:#BA3C97;"> /&gt;</span></span>
<span class="line"><span style="color:#9ABDF5;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7DCFFF;">export</span><span style="color:#7DCFFF;"> default</span><span style="color:#C0CAF5;"> ReactSwagger</span></span></code></pre></div></li><li><p>Navigate to <code>http://localhost:3000/api-doc</code> to see the Swagger UI.</p><p><img src="`+o+'" alt="Remult Admin"></p></li></ol><h1 id="adding-open-api-specific-field-options" tabindex="-1">Adding open api specific field options <a class="header-anchor" href="#adding-open-api-specific-field-options" aria-label="Permalink to &quot;Adding open api specific field options&quot;">â€‹</a></h1><p>Checkout the following example project that demos how to add <code>openApi</code> specific options to field options <a href="https://stackblitz.com/github/noam-honig/adding-open-api-options?file=server/build-open-api.ts,shared/task.ts" target="_blank" rel="noreferrer">stackblitz</a><a href="https://www.github.com/noam-honig/adding-open-api-options" target="_blank" rel="noreferrer">github</a></p>',9)]))}const d=a(e,[["render",t]]);export{A as __pageData,d as default};
