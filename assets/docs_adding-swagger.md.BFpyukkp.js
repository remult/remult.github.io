import{_ as s,c as a,o as n,a5 as p}from"./chunks/framework.ChN904aB.js";const l="/assets/example_remult-next-swagger-ui-page.CeW-IlH3.png",u=JSON.parse('{"title":"Adding Swagger and openApi","description":"","frontmatter":{},"headers":[],"relativePath":"docs/adding-swagger.md","filePath":"docs/adding-swagger.md","lastUpdated":1731140789000}'),o={name:"docs/adding-swagger.md"},e=p(`<h1 id="adding-swagger-and-openapi" tabindex="-1">Adding Swagger and openApi <a class="header-anchor" href="#adding-swagger-and-openapi" aria-label="Permalink to &quot;Adding Swagger and openApi&quot;">â€‹</a></h1><p>In short, swagger provides a quick UI that describes the api which is exposed by the application.</p><p>To add swagger to a <code>remult</code> application follow these steps:</p><ol><li><p>Install the <code>swagger-ui-express</code> package:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> swagger-ui-express</span></span>
<span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#569CD6;"> --save-dev</span><span style="color:#CE9178;"> @types/swagger-ui-express</span></span></code></pre></div></li><li><p>In the <code>/src/server/index.ts</code> file add the following code:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> express</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &#39;express&#39;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> swaggerUi</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &#39;swagger-ui-express&#39;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultExpress</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;remult/remult-express&#39;</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> app</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">express</span><span style="color:#D4D4D4;">();</span></span>
<span class="line highlighted"><span style="color:#569CD6;">let</span><span style="color:#9CDCFE;"> api</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">remultExpress</span><span style="color:#D4D4D4;">();</span></span>
<span class="line highlighted"><wbr></span>
<span class="line highlighted"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">api</span><span style="color:#D4D4D4;">);</span></span>
<span class="line highlighted"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> openApiDocument</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">api</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">openApiDoc</span><span style="color:#D4D4D4;">({ </span><span style="color:#9CDCFE;">title:</span><span style="color:#CE9178;"> &quot;remult-react-todo&quot;</span><span style="color:#D4D4D4;"> });</span></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">get</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;/api/openApi.json&quot;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">req</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">res</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span><span style="color:#9CDCFE;">res</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">json</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">openApiDocument</span><span style="color:#D4D4D4;">)});</span></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;/api/docs&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">swaggerUi</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">serve</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">swaggerUi</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">setup</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">openApiDocument</span><span style="color:#D4D4D4;">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">listen</span><span style="color:#D4D4D4;">(</span><span style="color:#B5CEA8;">3002</span><span style="color:#D4D4D4;">, () </span><span style="color:#569CD6;">=&gt;</span><span style="color:#9CDCFE;"> console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;Server started&quot;</span><span style="color:#D4D4D4;">));</span></span></code></pre></div></li></ol><h2 id="adding-swagger-ui-to-a-nextjs-app" tabindex="-1">Adding Swagger UI to a NextJs App <a class="header-anchor" href="#adding-swagger-ui-to-a-nextjs-app" aria-label="Permalink to &quot;Adding Swagger UI to a NextJs App&quot;">â€‹</a></h2><p>To add swagger UI to a <code>NextJs</code> application follow these steps:</p><ol><li><p>Install the following packages:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;"># With npm</span></span>
<span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> swagger-ui-react</span></span>
<span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#569CD6;"> -D</span><span style="color:#CE9178;"> @types/swagger-ui-react</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;"># With yarn</span></span>
<span class="line"><span style="color:#DCDCAA;">yarn</span><span style="color:#CE9178;"> add</span><span style="color:#CE9178;"> swagger-ui-react</span></span>
<span class="line"><span style="color:#DCDCAA;">yarn</span><span style="color:#CE9178;"> add</span><span style="color:#569CD6;"> -D</span><span style="color:#CE9178;"> @types/swagger-ui-react</span></span></code></pre></div></li><li><p>Get the openApi document from RemultNextAppServer:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// src/api.ts</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">Task</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;@/shared/Task&#39;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">TasksController</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;@/shared/TasksController&#39;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultNextApp</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;remult/remult-next&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> const</span><span style="color:#4FC1FF;"> api</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">remultNextApp</span><span style="color:#D4D4D4;">({</span></span>
<span class="line"><span style="color:#9CDCFE;">  admin:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">  entities:</span><span style="color:#D4D4D4;"> [</span><span style="color:#9CDCFE;">Task</span><span style="color:#D4D4D4;">],</span></span>
<span class="line"><span style="color:#9CDCFE;">  controllers:</span><span style="color:#D4D4D4;"> [</span><span style="color:#9CDCFE;">TasksController</span><span style="color:#D4D4D4;">],</span></span>
<span class="line"><span style="color:#D4D4D4;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A9955;">// Export this here ðŸ‘‡</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> const</span><span style="color:#4FC1FF;"> openApiDoc</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">api</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">openApiDoc</span><span style="color:#D4D4D4;">({</span></span>
<span class="line"><span style="color:#9CDCFE;">  title:</span><span style="color:#CE9178;"> &#39;Todo App&#39;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> const</span><span style="color:#D4D4D4;"> { </span><span style="color:#4FC1FF;">POST</span><span style="color:#D4D4D4;">, </span><span style="color:#4FC1FF;">PUT</span><span style="color:#D4D4D4;">, </span><span style="color:#4FC1FF;">DELETE</span><span style="color:#D4D4D4;">, </span><span style="color:#4FC1FF;">GET</span><span style="color:#D4D4D4;"> } = </span><span style="color:#9CDCFE;">api</span></span></code></pre></div></li><li><p>Create a new page to render Swagger UI:</p><div class="language-tsx"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// src/app/api-doc/page.tsx</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">openApiDoc</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;@/api&#39;</span><span style="color:#6A9955;"> // ðŸ‘ˆ Import the openApiDoc you exported earlier</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> ReactSwagger</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &#39;./react-swagger&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#C586C0;"> default</span><span style="color:#569CD6;"> async</span><span style="color:#569CD6;"> function</span><span style="color:#DCDCAA;"> IndexPage</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#C586C0;">  return</span><span style="color:#D4D4D4;"> (</span></span>
<span class="line"><span style="color:#808080;">    &lt;</span><span style="color:#569CD6;">section</span><span style="color:#9CDCFE;"> className</span><span style="color:#D4D4D4;">=</span><span style="color:#CE9178;">&quot;container&quot;</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#808080;">      &lt;</span><span style="color:#4EC9B0;">ReactSwagger</span><span style="color:#9CDCFE;"> spec</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">{</span><span style="color:#9CDCFE;">openApiDoc</span><span style="color:#569CD6;">}</span><span style="color:#808080;"> /&gt;</span></span>
<span class="line"><span style="color:#808080;">    &lt;/</span><span style="color:#569CD6;">section</span><span style="color:#808080;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">  )</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><div class="language-tsx"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// src/app/api-doc/react-swagger.tsx</span></span>
<span class="line"><span style="color:#CE9178;">&#39;use client&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> SwaggerUI</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &#39;swagger-ui-react&#39;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#CE9178;"> &#39;swagger-ui-react/swagger-ui.css&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#4EC9B0;"> Props</span><span style="color:#D4D4D4;"> = {</span></span>
<span class="line"><span style="color:#9CDCFE;">  spec</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">Record</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">any</span><span style="color:#D4D4D4;">&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">function</span><span style="color:#DCDCAA;"> ReactSwagger</span><span style="color:#D4D4D4;">({ </span><span style="color:#9CDCFE;">spec</span><span style="color:#D4D4D4;"> }: </span><span style="color:#4EC9B0;">Props</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;">  return</span><span style="color:#808080;"> &lt;</span><span style="color:#4EC9B0;">SwaggerUI</span><span style="color:#9CDCFE;"> spec</span><span style="color:#D4D4D4;">=</span><span style="color:#569CD6;">{</span><span style="color:#9CDCFE;">spec</span><span style="color:#569CD6;">}</span><span style="color:#808080;"> /&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#C586C0;"> default</span><span style="color:#9CDCFE;"> ReactSwagger</span></span></code></pre></div></li><li><p>Navigate to <code>http://localhost:3000/api-doc</code> to see the Swagger UI.</p><p><img src="`+l+'" alt="Remult Admin"></p></li></ol><h1 id="adding-open-api-specific-field-options" tabindex="-1">Adding open api specific field options <a class="header-anchor" href="#adding-open-api-specific-field-options" aria-label="Permalink to &quot;Adding open api specific field options&quot;">â€‹</a></h1><p>Checkout the following example project that demos how to add <code>openApi</code> specific options to field options <a href="https://stackblitz.com/github/noam-honig/adding-open-api-options?file=server/build-open-api.ts,shared/task.ts" target="_blank" rel="noreferrer">stackblitz</a><a href="https://www.github.com/noam-honig/adding-open-api-options" target="_blank" rel="noreferrer">github</a></p>',9),t=[e];function c(r,D,i,y,C,d){return n(),a("div",null,t)}const E=s(o,[["render",c]]);export{u as __pageData,E as default};
