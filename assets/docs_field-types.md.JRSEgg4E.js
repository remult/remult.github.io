import{_ as s,o as a,c as n,R as e}from"./chunks/framework.UFCy2Zbw.js";const u=JSON.parse('{"title":"Field Types","description":"","frontmatter":{},"headers":[],"relativePath":"docs/field-types.md","filePath":"docs/field-types.md","lastUpdated":1711906368000}'),l={name:"docs/field-types.md"},o=e(`<h1 id="field-types" tabindex="-1">Field Types <a class="header-anchor" href="#field-types" aria-label="Permalink to &quot;Field Types&quot;">​</a></h1><h2 id="common-field-types" tabindex="-1">Common field types <a class="header-anchor" href="#common-field-types" aria-label="Permalink to &quot;Common field types&quot;">​</a></h2><p>There are also several built in Field decorators for common use case:</p><h3 id="fields-string" tabindex="-1">@Fields.string <a class="header-anchor" href="#fields-string" aria-label="Permalink to &quot;@Fields.string&quot;">​</a></h3><p>A field of type string</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">string</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#9CDCFE;">title</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;&#39;</span><span style="color:#D4D4D4;">;</span></span></code></pre></div><h3 id="fields-number" tabindex="-1">@Fields.number <a class="header-anchor" href="#fields-number" aria-label="Permalink to &quot;@Fields.number&quot;">​</a></h3><p>Just like TypeScript, by default any number is a decimal (or float).</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">number</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#9CDCFE;">price</span><span style="color:#D4D4D4;"> = </span><span style="color:#B5CEA8;">1.5</span></span></code></pre></div><h3 id="fields-integer" tabindex="-1">@Fields.integer <a class="header-anchor" href="#fields-integer" aria-label="Permalink to &quot;@Fields.integer&quot;">​</a></h3><p>For cases where you don&#39;t want to have decimal values, you can use the <code>@Fields.integer</code> decorator</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">integer</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#9CDCFE;">quantity</span><span style="color:#D4D4D4;"> = </span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">;</span></span></code></pre></div><h3 id="fields-boolean" tabindex="-1">@Fields.boolean <a class="header-anchor" href="#fields-boolean" aria-label="Permalink to &quot;@Fields.boolean&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">boolean</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#9CDCFE;">completed</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">false</span></span></code></pre></div><h3 id="fields-date" tabindex="-1">@Fields.date <a class="header-anchor" href="#fields-date" aria-label="Permalink to &quot;@Fields.date&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">date</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#9CDCFE;">statusDate</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Date</span><span style="color:#D4D4D4;">()</span></span></code></pre></div><h3 id="fields-dateonly" tabindex="-1">@Fields.dateOnly <a class="header-anchor" href="#fields-dateonly" aria-label="Permalink to &quot;@Fields.dateOnly&quot;">​</a></h3><p>Just like TypeScript, by default any <code>Date</code> field includes the time as well. For cases where you only want a date, and don&#39;t want to meddle with time and time zone issues, use the <code>@Fields.dateOnly</code></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">dateOnly</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#9CDCFE;">birthDate</span><span style="color:#D4D4D4;">?:</span><span style="color:#9CDCFE;">Date</span><span style="color:#D4D4D4;">;</span></span></code></pre></div><h3 id="fields-createdat" tabindex="-1">@Fields.createdAt <a class="header-anchor" href="#fields-createdat" aria-label="Permalink to &quot;@Fields.createdAt&quot;">​</a></h3><p>Automatically set on the backend on insert, and can&#39;t be set through the API</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">createdAt</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#9CDCFE;">createdAt</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Date</span><span style="color:#D4D4D4;">()</span></span></code></pre></div><h3 id="fields-updatedat" tabindex="-1">@Fields.updatedAt <a class="header-anchor" href="#fields-updatedat" aria-label="Permalink to &quot;@Fields.updatedAt&quot;">​</a></h3><p>Automatically set on the backend on update, and can&#39;t be set through the API</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">updatedAt</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#9CDCFE;">updatedAt</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Date</span><span style="color:#D4D4D4;">()</span></span></code></pre></div><h2 id="json-field" tabindex="-1">JSON Field <a class="header-anchor" href="#json-field" aria-label="Permalink to &quot;JSON Field&quot;">​</a></h2><p>You can store JSON data and arrays in fields.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">json</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#C8C8C8;">tags</span><span style="color:#D4D4D4;">: </span><span style="color:#9CDCFE;">string</span><span style="color:#D4D4D4;">[] = []</span></span></code></pre></div><h2 id="auto-generated-id-field-types" tabindex="-1">Auto Generated Id Field Types <a class="header-anchor" href="#auto-generated-id-field-types" aria-label="Permalink to &quot;Auto Generated Id Field Types&quot;">​</a></h2><h3 id="fields-uuid" tabindex="-1">@Fields.uuid <a class="header-anchor" href="#fields-uuid" aria-label="Permalink to &quot;@Fields.uuid&quot;">​</a></h3><p>This id value is determined on the backend on insert, and can&#39;t be updated through the API.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">uuid</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#C8C8C8;">id</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">string</span></span></code></pre></div><h3 id="fields-cuid" tabindex="-1">@Fields.cuid <a class="header-anchor" href="#fields-cuid" aria-label="Permalink to &quot;@Fields.cuid&quot;">​</a></h3><p>This id value is determined on the backend on insert, and can&#39;t be updated through the API. Uses the <a href="https://www.npmjs.com/package/@paralleldrive/cuid2" target="_blank" rel="noreferrer">@paralleldrive/cuid2</a> package</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">cuid</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#C8C8C8;">id</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">string</span></span></code></pre></div><h3 id="fields-autoincrement" tabindex="-1">@Fields.autoIncrement <a class="header-anchor" href="#fields-autoincrement" aria-label="Permalink to &quot;@Fields.autoIncrement&quot;">​</a></h3><p>This id value is determined by the underlying database on insert, and can&#39;t be updated through the API.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">autoIncrement</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#C8C8C8;">id</span><span style="color:#D4D4D4;">:</span><span style="color:#9CDCFE;">number</span></span></code></pre></div><h3 id="mongodb-objectid-field" tabindex="-1">MongoDB ObjectId Field <a class="header-anchor" href="#mongodb-objectid-field" aria-label="Permalink to &quot;MongoDB ObjectId Field&quot;">​</a></h3><p>To indicate that a field is of type object id, change it&#39;s <code>fieldTypeInDb</code> to <code>dbid</code>.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">string</span><span style="color:#D4D4D4;">({</span></span>
<span class="line"><span style="color:#9CDCFE;">  dbName:</span><span style="color:#CE9178;"> &#39;_id&#39;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">  valueConverter:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#9CDCFE;">    fieldTypeInDb:</span><span style="color:#CE9178;"> &#39;dbid&#39;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">  },</span></span>
<span class="line"><span style="color:#D4D4D4;">})</span></span>
<span class="line"><span style="color:#C8C8C8;">id</span><span style="color:#D4D4D4;">: </span><span style="color:#9CDCFE;">string</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;&#39;</span></span></code></pre></div><h2 id="enum-field" tabindex="-1">Enum Field <a class="header-anchor" href="#enum-field" aria-label="Permalink to &quot;Enum Field&quot;">​</a></h2><p>Enum fields allow you to define a field that can only hold values from a specific enumeration. The <code>@Fields.enum</code> decorator is used to specify that a field is an enum type. When using the <code>@Fields.enum</code> decorator, an automatic validation is added that checks if the value is valid in the specified enum.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">enum</span><span style="color:#D4D4D4;">(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#9CDCFE;"> Priority</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#9CDCFE;">priority</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">Priority</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">Low</span><span style="color:#D4D4D4;">;</span></span></code></pre></div><p>In this example, the <code>priority</code> field is defined as an enum type using the <code>@Fields.enum</code> decorator. The <code>Priority</code> enum is passed as an argument to the decorator, ensuring that only valid <code>Priority</code> enum values can be assigned to the <code>priority</code> field. The <code>Validators.enum</code> validation is used and ensures that any value assigned to this field must be a member of the <code>Priority</code> enum, providing type safety and preventing invalid values.</p><h2 id="literal-fields-union-of-string-values" tabindex="-1">Literal Fields (Union of string values) <a class="header-anchor" href="#literal-fields-union-of-string-values" aria-label="Permalink to &quot;Literal Fields (Union of string values)&quot;">​</a></h2><p>Literal fields let you restrict a field to a specific set of string values using the <code>@Fields.literal</code> decorator. This is useful for fields with a finite set of possible values.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">literal</span><span style="color:#D4D4D4;">(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> [</span><span style="color:#CE9178;">&#39;open&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;closed&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;frozen&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;in progress&#39;</span><span style="color:#D4D4D4;">] </span><span style="color:#C586C0;">as</span><span style="color:#569CD6;"> const</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C8C8C8;">status</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&#39;open&#39;</span><span style="color:#D4D4D4;"> | </span><span style="color:#CE9178;">&#39;closed&#39;</span><span style="color:#D4D4D4;"> | </span><span style="color:#CE9178;">&#39;frozen&#39;</span><span style="color:#D4D4D4;"> | </span><span style="color:#CE9178;">&#39;in progress&#39;</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;open&#39;</span><span style="color:#D4D4D4;">;</span></span></code></pre></div><p>In this example, we use the <code>as const</code> assertion to ensure that the array <code>[&#39;open&#39;, &#39;closed&#39;, &#39;frozen&#39;, &#39;in progress&#39;]</code> is treated as a readonly array, which allows TypeScript to infer the literal types &#39;open&#39;, &#39;closed&#39;, &#39;frozen&#39;, and &#39;in progress&#39; for the elements of the array. This is important for the type safety of the <code>status</code> field.</p><p>The <code>status</code> field is typed as <code>&#39;open&#39; | &#39;closed&#39; | &#39;frozen&#39; | &#39;in progress&#39;</code>, which means it can only hold one of these string literals. The <code>@Fields.literal</code> decorator is used to specify that the <code>status</code> field can hold values from this set of strings, and it uses the <code>Validators.in</code> validator to ensure that the value of <code>status</code> matches one of the allowed values.</p><p>For better reusability and maintainability, and to follow the DRY (Don&#39;t Repeat Yourself) principle, it is recommended to refactor the literal type and the array of allowed values into separate declarations:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> statuses</span><span style="color:#D4D4D4;"> = [</span><span style="color:#CE9178;">&#39;open&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;closed&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;frozen&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;in progress&#39;</span><span style="color:#D4D4D4;">] </span><span style="color:#C586C0;">as</span><span style="color:#569CD6;"> const</span><span style="color:#D4D4D4;">;</span></span>
<span class="line"><span style="color:#569CD6;">type</span><span style="color:#4EC9B0;"> StatusType</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">typeof</span><span style="color:#9CDCFE;"> statuses</span><span style="color:#D4D4D4;">[</span><span style="color:#9CDCFE;">number</span><span style="color:#D4D4D4;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">literal</span><span style="color:#D4D4D4;">(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#9CDCFE;"> statuses</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C8C8C8;">status</span><span style="color:#D4D4D4;">: </span><span style="color:#9CDCFE;">StatusType</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;open&#39;</span><span style="color:#D4D4D4;">;</span></span></code></pre></div><p>In this refactored example, <code>statuses</code> is a readonly array of the allowed values, and <code>StatusType</code> is a type derived from the elements of <code>statuses</code>. The <code>@Fields.literal</code> decorator is then used with the <code>statuses</code> array, and the <code>status</code> field is typed as <code>StatusType</code>. This approach makes it easier to manage and update the allowed values for the <code>status</code> field, reducing duplication and making the code more robust and easier to maintain.</p><h2 id="valuelistfieldtype" tabindex="-1">ValueListFieldType <a class="header-anchor" href="#valuelistfieldtype" aria-label="Permalink to &quot;ValueListFieldType&quot;">​</a></h2><h3 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h3><p>The <code>ValueListFieldType</code> is useful in cases where simple enums and unions are not enough, such as when you want to have more properties for each value. For example, consider representing countries where you want to have a country code, description, currency, and international phone prefix.</p><h3 id="defining-a-valuelistfieldtype" tabindex="-1">Defining a ValueListFieldType <a class="header-anchor" href="#defining-a-valuelistfieldtype" aria-label="Permalink to &quot;Defining a ValueListFieldType&quot;">​</a></h3><p>Using enums or union types for this purpose can be challenging. Instead, you can use the <code>ValueListFieldType</code>:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">ValueListFieldType</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Country</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#569CD6;">  static</span><span style="color:#9CDCFE;"> us</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Country</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;us&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;United States&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;USD&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;1&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">  static</span><span style="color:#9CDCFE;"> canada</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Country</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;ca&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;Canada&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;CAD&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;1&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#569CD6;">  static</span><span style="color:#9CDCFE;"> france</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Country</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;fr&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;France&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;EUR&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#CE9178;">&#39;33&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">  constructor</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#9CDCFE;"> id</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#9CDCFE;"> caption</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#9CDCFE;"> currency</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#569CD6;">    public</span><span style="color:#9CDCFE;"> phonePrefix</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">  ) {}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><h3 id="using-in-an-entity" tabindex="-1">Using in an Entity <a class="header-anchor" href="#using-in-an-entity" aria-label="Permalink to &quot;Using in an Entity&quot;">​</a></h3><p>In your entity, you can define the field as follows:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">Field</span><span style="color:#D4D4D4;">(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#9CDCFE;"> Country</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C8C8C8;">country</span><span style="color:#D4D4D4;">: </span><span style="color:#9CDCFE;">Country</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">Country</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">us</span><span style="color:#D4D4D4;">;</span></span></code></pre></div><h3 id="accessing-properties" tabindex="-1">Accessing Properties <a class="header-anchor" href="#accessing-properties" aria-label="Permalink to &quot;Accessing Properties&quot;">​</a></h3><p>The property called <code>id</code> will be stored in the database and used through the API, while in the code itself, you can use each property:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#DCDCAA;">call</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;+&#39;</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">person</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">country</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">phonePrefix</span><span style="color:#D4D4D4;"> + </span><span style="color:#9CDCFE;">person</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">phone</span><span style="color:#D4D4D4;">)</span></span></code></pre></div><p>Note: Only the <code>id</code> property is saved in the database and used in the API. Other properties, such as <code>caption</code>, <code>currency</code>, and <code>phonePrefix</code>, are only accessible in the code and are not persisted in the database.</p><h3 id="getting-optional-values" tabindex="-1">Getting Optional Values <a class="header-anchor" href="#getting-optional-values" aria-label="Permalink to &quot;Getting Optional Values&quot;">​</a></h3><p>To get the optional values for <code>Country</code>, you can use the <code>getValueList</code> function, which is useful for populating combo boxes:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">table</span><span style="color:#D4D4D4;">(</span><span style="color:#DCDCAA;">getValueList</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">Country</span><span style="color:#D4D4D4;">))</span></span></code></pre></div><h3 id="special-properties-id-and-caption" tabindex="-1">Special Properties: id and caption <a class="header-anchor" href="#special-properties-id-and-caption" aria-label="Permalink to &quot;Special Properties: id and caption&quot;">​</a></h3><p>The <code>id</code> and <code>caption</code> properties are special in that the <code>id</code> will be used to save and load from the database, and the <code>caption</code> will be used as the display value.</p><h3 id="automatic-generation-of-id-and-caption" tabindex="-1">Automatic Generation of id and caption <a class="header-anchor" href="#automatic-generation-of-id-and-caption" aria-label="Permalink to &quot;Automatic Generation of id and caption&quot;">​</a></h3><p>If <code>id</code> and/or <code>caption</code> are not provided, they are automatically generated based on the static member name. For example:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">ValueListFieldType</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> TaskStatus</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#569CD6;">  static</span><span style="color:#9CDCFE;"> open</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> TaskStatus</span><span style="color:#D4D4D4;">() </span><span style="color:#6A9955;">// { id: &#39;open&#39;, caption: &#39;Open&#39; }</span></span>
<span class="line"><span style="color:#569CD6;">  static</span><span style="color:#9CDCFE;"> closed</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> TaskStatus</span><span style="color:#D4D4D4;">() </span><span style="color:#6A9955;">// { id: &#39;closed&#39;, caption: &#39;Closed&#39; }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">  id</span><span style="color:#D4D4D4;">!: </span><span style="color:#4EC9B0;">string</span></span>
<span class="line"><span style="color:#9CDCFE;">  caption</span><span style="color:#D4D4D4;">!: </span><span style="color:#4EC9B0;">string</span></span>
<span class="line"><span style="color:#569CD6;">  constructor</span><span style="color:#D4D4D4;">() {}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><p>In this case, the <code>open</code> member will have an <code>id</code> of <code>&#39;open&#39;</code> and a <code>caption</code> of <code>&#39;Open&#39;</code>, and similarly for the <code>closed</code> member.</p><h3 id="handling-partial-lists-of-values" tabindex="-1">Handling Partial Lists of Values <a class="header-anchor" href="#handling-partial-lists-of-values" aria-label="Permalink to &quot;Handling Partial Lists of Values&quot;">​</a></h3><p>In cases where you only want to generate members for a subset of values, you can use the <code>getValues</code> option of <code>@ValueListFieldType</code> to specify which values should be included:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">ValueListFieldType</span><span style="color:#D4D4D4;">({</span></span>
<span class="line"><span style="color:#DCDCAA;">  getValues</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> () </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> [</span></span>
<span class="line"><span style="color:#9CDCFE;">    Country</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">us</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    Country</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">canada</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    Country</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">france</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">    { </span><span style="color:#9CDCFE;">id:</span><span style="color:#CE9178;"> &#39;uk&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">caption:</span><span style="color:#CE9178;"> &#39;United Kingdom&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">currency:</span><span style="color:#CE9178;"> &#39;GBP&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">phonePrefix:</span><span style="color:#CE9178;"> &#39;44&#39;</span><span style="color:#D4D4D4;"> }</span></span>
<span class="line"><span style="color:#D4D4D4;">  ]</span></span>
<span class="line"><span style="color:#D4D4D4;">})</span></span></code></pre></div><p>This approach is useful when you want to limit the options available for a field to a specific subset of values, without needing to define all possible values as static members.</p><div class="warning custom-block"><p class="custom-block-title">Warning: TypeScript may throw an error similar to <code>Uncaught TypeError: Currency_1 is not a constructor</code>.</p><p>This happens in TypeScript versions &lt;5.1.6 and target es2022. It&#39;s a TypeScript bug. To fix it, upgrade to version &gt;=5.1.6 or change the target from es2022. Alternatively, you can call the <code>ValueListFieldType</code> decorator as a function after the type:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> TaskStatus</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#569CD6;">  static</span><span style="color:#9CDCFE;"> open</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> TaskStatus</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#569CD6;">  static</span><span style="color:#9CDCFE;"> closed</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> TaskStatus</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">  id</span><span style="color:#D4D4D4;">!: </span><span style="color:#4EC9B0;">string</span></span>
<span class="line"><span style="color:#9CDCFE;">  caption</span><span style="color:#D4D4D4;">!: </span><span style="color:#4EC9B0;">string</span></span>
<span class="line"><span style="color:#569CD6;">  constructor</span><span style="color:#D4D4D4;">() {}</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"><span style="color:#DCDCAA;">ValueListFieldType</span><span style="color:#D4D4D4;">()(</span><span style="color:#9CDCFE;">TaskStatus</span><span style="color:#D4D4D4;">)</span></span></code></pre></div></div><h3 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary&quot;">​</a></h3><p>The <code>ValueListFieldType</code> enables the creation of more complex value lists that provide greater flexibility and functionality for your application&#39;s needs beyond what enums and unions can offer. By allowing for additional properties and partial lists of values, it offers a versatile solution for representing and managing data with multiple attributes.</p><h2 id="control-field-type-in-database" tabindex="-1">Control Field Type in Database <a class="header-anchor" href="#control-field-type-in-database" aria-label="Permalink to &quot;Control Field Type in Database&quot;">​</a></h2><p>In some cases, you may want to explicitly specify the type of a field in the database. This can be useful when you need to ensure a specific data type or precision for your field. To control the field type in the database, you can use the <code>fieldTypeInDb</code> option within the <code>valueConverter</code> property of a field decorator.</p><p>For example, if you want to ensure that a numeric field is stored as a decimal with specific precision in the database, you can specify the <code>fieldTypeInDb</code> as follows:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">number</span><span style="color:#D4D4D4;">({</span></span>
<span class="line"><span style="color:#9CDCFE;">  valueConverter:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#9CDCFE;">    fieldTypeInDb:</span><span style="color:#CE9178;"> &#39;decimal(16,8)&#39;</span></span>
<span class="line"><span style="color:#D4D4D4;">  }</span></span>
<span class="line"><span style="color:#D4D4D4;">})</span></span>
<span class="line"><span style="color:#9CDCFE;">price</span><span style="color:#D4D4D4;">=</span><span style="color:#B5CEA8;">0</span><span style="color:#D4D4D4;">;</span></span></code></pre></div><p>In this example, the <code>price</code> field will be stored as a <code>decimal</code> with 16 digits in total and 8 digits after the decimal point in the database. This allows you to control the storage format and precision of numeric fields in your database schema.</p><h2 id="creating-custom-field-types" tabindex="-1">Creating Custom Field Types <a class="header-anchor" href="#creating-custom-field-types" aria-label="Permalink to &quot;Creating Custom Field Types&quot;">​</a></h2><p>Sometimes, you may need to create custom field types to handle specific requirements or use cases in your application. By creating custom field types, you can encapsulate the logic for generating, validating, and converting field values.</p><h3 id="example-creating-a-custom-id-field-type-with-nanoid" tabindex="-1">Example: Creating a Custom ID Field Type with NanoID <a class="header-anchor" href="#example-creating-a-custom-id-field-type-with-nanoid" aria-label="Permalink to &quot;Example: Creating a Custom ID Field Type with NanoID&quot;">​</a></h3><p>NanoID is a tiny, secure, URL-friendly, unique string ID generator. You can create a custom field type using NanoID to generate unique IDs for your entities. Here&#39;s an example of how to create a custom NanoID field type:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">nanoid</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;nanoid&#39;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">, </span><span style="color:#C586C0;">type</span><span style="color:#9CDCFE;"> FieldOptions</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;remult&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> function</span><span style="color:#DCDCAA;"> NanoIdField</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">entityType</span><span style="color:#D4D4D4;"> = </span><span style="color:#4EC9B0;">any</span><span style="color:#D4D4D4;">&gt;(</span></span>
<span class="line"><span style="color:#D4D4D4;">  ...</span><span style="color:#9CDCFE;">options</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">FieldOptions</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">entityType</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">&gt;[]</span></span>
<span class="line"><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;">  return</span><span style="color:#9CDCFE;"> Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">string</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">entityType</span><span style="color:#D4D4D4;">&gt;(</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#9CDCFE;">      allowApiUpdate:</span><span style="color:#569CD6;"> false</span><span style="color:#D4D4D4;">, </span><span style="color:#6A9955;">// Disallow updating the ID through the API</span></span>
<span class="line"><span style="color:#DCDCAA;">      defaultValue</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> () </span><span style="color:#569CD6;">=&gt;</span><span style="color:#DCDCAA;"> nanoid</span><span style="color:#D4D4D4;">(), </span><span style="color:#6A9955;">// Generate a new NanoID as the default value</span></span>
<span class="line"><span style="color:#DCDCAA;">      saving</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">_</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">record</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#C586C0;">        if</span><span style="color:#D4D4D4;"> (!</span><span style="color:#9CDCFE;">record</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#9CDCFE;">          record</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">nanoid</span><span style="color:#D4D4D4;">() </span><span style="color:#6A9955;">// Generate a new NanoID if the value is not set</span></span>
<span class="line"><span style="color:#D4D4D4;">        }</span></span>
<span class="line"><span style="color:#D4D4D4;">      },</span></span>
<span class="line"><span style="color:#D4D4D4;">    },</span></span>
<span class="line"><span style="color:#D4D4D4;">    ...</span><span style="color:#9CDCFE;">options</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">  )</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><p>In this example, the <code>NanoIdField</code> function creates a custom field type based on the <code>Fields.string</code> type. It uses the <code>nanoid</code> function to generate a unique ID as the default value and ensures that the ID is generated before saving the record if it hasn&#39;t been set yet. This custom field type can be used in your entities to automatically generate and assign unique IDs using NanoID.</p><h2 id="customize-db-value-conversions" tabindex="-1">Customize DB Value Conversions <a class="header-anchor" href="#customize-db-value-conversions" aria-label="Permalink to &quot;Customize DB Value Conversions&quot;">​</a></h2><p>Sometimes you want to control how data is saved to the db, or the dto object. You can do that using the <code>valueConverter</code> option.</p><p>For example, the following code will save the <code>tags</code> as a comma separated string in the db.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">object</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Task</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">[]&gt;({</span></span>
<span class="line"><span style="color:#9CDCFE;">  valueConverter:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#DCDCAA;">    toDb</span><span style="color:#9CDCFE;">:</span><span style="color:#9CDCFE;"> x</span><span style="color:#569CD6;"> =&gt;</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> ? </span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">join</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;,&quot;</span><span style="color:#D4D4D4;">) : </span><span style="color:#569CD6;">undefined</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#DCDCAA;">    fromDb</span><span style="color:#9CDCFE;">:</span><span style="color:#9CDCFE;"> x</span><span style="color:#569CD6;"> =&gt;</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> ? </span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">split</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;,&quot;</span><span style="color:#D4D4D4;">) : </span><span style="color:#569CD6;">undefined</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">  }</span></span>
<span class="line"><span style="color:#D4D4D4;">})</span></span>
<span class="line"><span style="color:#C8C8C8;">tags</span><span style="color:#D4D4D4;">: </span><span style="color:#9CDCFE;">string</span><span style="color:#D4D4D4;">[] = []</span></span></code></pre></div><p>You can also refactor it to create your own FieldType</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">Field</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">FieldOptions</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Remult</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;remult&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> function</span><span style="color:#DCDCAA;"> CommaSeparatedStringArrayField</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">entityType</span><span style="color:#D4D4D4;"> = </span><span style="color:#4EC9B0;">any</span><span style="color:#D4D4D4;">&gt;(</span></span>
<span class="line"><span style="color:#D4D4D4;">  ...</span><span style="color:#DCDCAA;">options</span><span style="color:#D4D4D4;">: (</span></span>
<span class="line"><span style="color:#D4D4D4;">    | </span><span style="color:#4EC9B0;">FieldOptions</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">entityType</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">[]&gt;</span></span>
<span class="line"><span style="color:#D4D4D4;">    | ((</span><span style="color:#9CDCFE;">options</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">FieldOptions</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">entityType</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">[]&gt;, </span><span style="color:#9CDCFE;">remult</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">Remult</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#4EC9B0;"> void</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">  )[]</span></span>
<span class="line"><span style="color:#D4D4D4;">) {</span></span>
<span class="line"><span style="color:#C586C0;">  return</span><span style="color:#9CDCFE;"> Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">object</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#D4D4D4;">    {</span></span>
<span class="line"><span style="color:#9CDCFE;">      valueConverter:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#DCDCAA;">        toDb</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> ? </span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">join</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;,&#39;</span><span style="color:#D4D4D4;">) : </span><span style="color:#569CD6;">undefined</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#DCDCAA;">        fromDb</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> ? </span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">split</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;,&#39;</span><span style="color:#D4D4D4;">) : </span><span style="color:#569CD6;">undefined</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;">      },</span></span>
<span class="line"><span style="color:#D4D4D4;">    },</span></span>
<span class="line"><span style="color:#D4D4D4;">    ...</span><span style="color:#9CDCFE;">options</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">  )</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><p>And then use it:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">CommaSeparatedStringArrayField</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#C8C8C8;">tags</span><span style="color:#D4D4D4;">: </span><span style="color:#9CDCFE;">string</span><span style="color:#D4D4D4;">[] = []</span></span></code></pre></div><p>There are several ready made valueConverters included in the <code>remult</code> package, which can be found in <code>remult/valueConverters</code></p><h2 id="class-fields" tabindex="-1">Class Fields <a class="header-anchor" href="#class-fields" aria-label="Permalink to &quot;Class Fields&quot;">​</a></h2><p>Sometimes you may want a field type to be a class, you can do that, you just need to provide an implementation for its transition from and to JSON.</p><p>For example:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Phone</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#569CD6;">  constructor</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">public</span><span style="color:#9CDCFE;"> phone</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) {}</span></span>
<span class="line"><span style="color:#DCDCAA;">  call</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#9CDCFE;">    window</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">open</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;tel:&#39;</span><span style="color:#D4D4D4;"> + </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">phone</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">  }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">Entity</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;contacts&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Contact</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#6A9955;">  //...</span></span>
<span class="line"><span style="color:#D4D4D4;">  @</span><span style="color:#DCDCAA;">Field</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Contact</span><span style="color:#D4D4D4;">, </span><span style="color:#4EC9B0;">Phone</span><span style="color:#D4D4D4;">&gt;(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#9CDCFE;"> Phone</span><span style="color:#D4D4D4;">, {</span></span>
<span class="line"><span style="color:#9CDCFE;">    valueConverter:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#DCDCAA;">      fromJson</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> ? </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Phone</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">) : </span><span style="color:#569CD6;">undefined</span><span style="color:#D4D4D4;">!),</span></span>
<span class="line"><span style="color:#DCDCAA;">      toJson</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> ? </span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">phone</span><span style="color:#D4D4D4;"> : </span><span style="color:#569CD6;">undefined</span><span style="color:#D4D4D4;">!),</span></span>
<span class="line"><span style="color:#D4D4D4;">    },</span></span>
<span class="line"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#9CDCFE;">  phone</span><span style="color:#D4D4D4;">?: </span><span style="color:#4EC9B0;">Phone</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><p>Alternatively you can decorate the <code>Phone</code> class with the <code>FieldType</code> decorator, so that whenever you use it, its <code>valueConverter</code> will be used.</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">FieldType</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">Phone</span><span style="color:#D4D4D4;">&gt;({</span></span>
<span class="line"><span style="color:#9CDCFE;">  valueConverter:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#DCDCAA;">    fromJson</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> ? </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Phone</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">) : </span><span style="color:#569CD6;">undefined</span><span style="color:#D4D4D4;">!),</span></span>
<span class="line"><span style="color:#DCDCAA;">    toJson</span><span style="color:#9CDCFE;">:</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;"> ? </span><span style="color:#9CDCFE;">x</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">phone</span><span style="color:#D4D4D4;"> : </span><span style="color:#569CD6;">undefined</span><span style="color:#D4D4D4;">!),</span></span>
<span class="line"><span style="color:#D4D4D4;">  },</span></span>
<span class="line"><span style="color:#D4D4D4;">})</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Phone</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#569CD6;">  constructor</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">public</span><span style="color:#9CDCFE;"> phone</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;">) {}</span></span>
<span class="line"><span style="color:#DCDCAA;">  call</span><span style="color:#D4D4D4;">() {</span></span>
<span class="line"><span style="color:#9CDCFE;">    window</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">open</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;tel:&#39;</span><span style="color:#D4D4D4;"> + </span><span style="color:#569CD6;">this</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">phone</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#D4D4D4;">  }</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">Entity</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;contacts&#39;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> class</span><span style="color:#4EC9B0;"> Contact</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#6A9955;">  //...</span></span>
<span class="line"><span style="color:#D4D4D4;">  @</span><span style="color:#DCDCAA;">Field</span><span style="color:#D4D4D4;">(() </span><span style="color:#569CD6;">=&gt;</span><span style="color:#9CDCFE;"> Phone</span><span style="color:#D4D4D4;">)</span></span>
<span class="line"><span style="color:#9CDCFE;">  phone</span><span style="color:#D4D4D4;">?: </span><span style="color:#4EC9B0;">Phone</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div>`,108),p=[o];function t(c,r,D,i,y,d){return a(),n("div",null,p)}const h=s(l,[["render",t]]);export{u as __pageData,h as default};
