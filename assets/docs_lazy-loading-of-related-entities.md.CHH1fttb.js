import{_ as s,c as a,o as t,L as l}from"./chunks/framework.DdPzwmCl.js";const g=JSON.parse('{"title":"Lazy loading of related entities","description":"","frontmatter":{},"headers":[],"relativePath":"docs/lazy-loading-of-related-entities.md","filePath":"docs/lazy-loading-of-related-entities.md","lastUpdated":1677239600000}'),e={name:"docs/lazy-loading-of-related-entities.md"};function h(n,i,k,p,d,o){return t(),a("div",null,i[0]||(i[0]=[l(`<h1 id="lazy-loading-of-related-entities" tabindex="-1">Lazy loading of related entities <a class="header-anchor" href="#lazy-loading-of-related-entities" aria-label="Permalink to &quot;Lazy loading of related entities&quot;">​</a></h1><p>When an <code>entity</code> is loaded, its <code>many to one</code> relation fields are also automatically loaded, using a cache mechanism to prevent the reload of an already loaded <code>entity</code>. To disable that, set the <code>lazy</code> option to <code>true</code>.</p><p>let&#39;s use the example in <a href="./entity-relations">entity relations</a></p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">@</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">Entity</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">tasks</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">  allowApiCrud</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> true</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">})</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">export</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> class</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;"> Task</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> extends</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> IdEntity</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">  @</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">Fields</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">string</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span>
<span class="line"><span style="--shiki-dark:#73DACA;--shiki-light:#E36209;">  title</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;&quot;</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">  @</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">Fields</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">boolean</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span>
<span class="line"><span style="--shiki-dark:#73DACA;--shiki-light:#E36209;">  completed</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> false</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">  @</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">Field</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(()</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> Category</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line highlighted"><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">    lazy</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> true</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  })</span></span>
<span class="line"><span style="--shiki-dark:#73DACA;--shiki-light:#E36209;">  category</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">?:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;"> Category</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span></span></code></pre></div><h4 id="working-with-lazy" tabindex="-1">Working with Lazy <a class="header-anchor" href="#working-with-lazy" aria-label="Permalink to &quot;Working with Lazy&quot;">​</a></h4><ul><li>To manually load a related entity, use its <code>FieldRef</code>&#39;s load method.<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> task</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">$</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">category</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">load</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span></code></pre></div></li><li>If the field was not loaded, and you&#39;ll access it - it&#39;ll return <code>undefined</code> and will issue a request to load the related entity. once that entity is loaded, the field will return its value.</li><li>To check if a field has value, you can use the <code>valueIsNull</code> method of its <code>FieldRef</code><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> task</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">$</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">category</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">valueIsNull</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span></code></pre></div></li><li>You can override the default <code>lazy</code> definitions by setting the <code>load</code> option of the repository&#39;s <code>find</code> method. <ul><li>To load none of the related entities use:<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> taskRepo</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">find</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({</span></span>
<span class="line"><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">  load</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> ()</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> []</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">})</span></span></code></pre></div></li><li>To specify which fields to load:<div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> taskRepo</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">find</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({</span></span>
<span class="line"><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">  load</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#E0AF68;--shiki-light:#E36209;"> task</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">task</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">category</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">]</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">})</span></span></code></pre></div></li></ul></li></ul>`,6)]))}const y=s(e,[["render",h]]);export{g as __pageData,y as default};
