import{_ as p,C as l,c as r,o as d,L as n,G as h,j as i,w as t,a as s}from"./chunks/framework.DdPzwmCl.js";const A=JSON.parse('{"title":"Backend only code","description":"","frontmatter":{},"headers":[],"relativePath":"docs/using-server-only-packages.md","filePath":"docs/using-server-only-packages.md","lastUpdated":1729665324000}'),F={name:"docs/using-server-only-packages.md"};function D(g,a,y,o,c,C){const k=l("PluginTabsTab"),e=l("PluginTabs");return d(),r("div",null,[a[3]||(a[3]=n(`<h1 id="backend-only-code" tabindex="-1">Backend only code <a class="header-anchor" href="#backend-only-code" aria-label="Permalink to &quot;Backend only code&quot;">​</a></h1><p>One of the main advantages of remult is that you write code once, and it runs both on the server and in the browser.</p><p>However, if you are using a library that only works on the server, the fact that the same code is bundled to the frontend can cause problems. For example, when you build an Angular project, you&#39;ll get <code>Module not found</code> errors.</p><p>This article will walk through such a scenario and how it can be solved.</p><p>For this example, our customer would like us to document each call to the <code>updatePriceOnBackend</code> method in a log file.</p><p>Our first instinct would be to add in the <code>products.controller.ts</code> file an import to <code>fs</code> (Node JS file system component) and write the following code:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line highlighted"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> *</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> as</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> fs</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">fs</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#F7768E;--shiki-dark-font-weight:bold;--shiki-light:#D73A49;--shiki-light-font-weight:inherit;">...</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">..</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">@</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">BackendMethod</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">allowed</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;">true</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">})</span></span>
<span class="line"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">static</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> async</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> updatePriceOnBackend</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">priceToUpdate</span><span style="--shiki-dark:#A9B1D6;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">number</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">remult</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">?:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">Remult</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">){</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  let</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#24292E;"> products</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">repo</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">Products</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">find</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">  for</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> p</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> of</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> products</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">) {</span></span>
<span class="line"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">      p</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">price</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">value</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> +=</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> priceToUpdate</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">      await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> p</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">save</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  }</span></span>
<span class="line highlighted"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">  fs</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">appendFileSync</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">./logs/log.txt</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> Date</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">() </span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">+</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> +</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">user</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">name</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> +</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> update price</span><span style="--shiki-dark:#89DDFF;--shiki-light:#005CC5;">\\n</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">Error</p><p>As soon as we do that, we&#39;ll get the following errors on the <code>ng-serve</code> terminal</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;">ERROR</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> in</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> ./src/app/products/products.controller.ts</span></span>
<span class="line"><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;">Module</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> not</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> found:</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> Error:</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> Can</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">t resolve </span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">fs</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> in </span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">C:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#005CC5;">\\t</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">ry</span><span style="--shiki-dark:#89DDFF;--shiki-light:#005CC5;">\\t</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">est19</span><span style="--shiki-dark:#89DDFF;--shiki-light:#005CC5;">\\m</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">y-project</span><span style="--shiki-dark:#89DDFF;--shiki-light:#005CC5;">\\s</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">rc</span><span style="--shiki-dark:#89DDFF;--shiki-light:#005CC5;">\\a</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">pp</span><span style="--shiki-dark:#89DDFF;--shiki-light:#005CC5;">\\p</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">roducts</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">i ｢wdm｣: Failed to compile.</span></span></code></pre></div></div><p>We get this error because the <code>fs</code> module on which we rely here is only relevant in the remult of a <code>Node JS</code> server and not in the context of the browser.</p><p>There are two ways to handle this:</p><h2 id="solution-1-exclude-from-bundler" tabindex="-1">Solution 1 - exclude from bundler <a class="header-anchor" href="#solution-1-exclude-from-bundler" aria-label="Permalink to &quot;Solution 1 - exclude from bundler&quot;">​</a></h2>`,11)),h(e,null,{default:t(()=>[h(k,{label:"vite"},{default:t(()=>a[0]||(a[0]=[i("h3",{id:"exclude-in-vite-config",tabindex:"-1"},[s("Exclude in "),i("code",null,"vite.config"),s(),i("a",{class:"header-anchor",href:"#exclude-in-vite-config","aria-label":'Permalink to "Exclude in `vite.config`"'},"​")],-1),i("p",null,[s("Instruct vite to exclude the "),i("code",null,"server-only"),s(" packages from the bundle")],-1),i("div",{class:"language-ts vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"ts"),i("pre",{class:"shiki shiki-themes tokyo-night github-light has-diff vp-code",style:{"--shiki-dark":"#a9b1d6","--shiki-light":"#24292e","--shiki-dark-bg":"#1a1b26","--shiki-light-bg":"#fff"},tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#D73A49"}},"import"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," { "),i("span",{style:{"--shiki-dark":"#0DB9D7","--shiki-light":"#24292E"}},"defineConfig"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," }"),i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#D73A49"}}," from"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}}," '"),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"vite"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#D73A49"}},"import"),i("span",{style:{"--shiki-dark":"#0DB9D7","--shiki-light":"#24292E"}}," react"),i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#D73A49"}}," from"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}}," '"),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"@vitejs/plugin-react"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#51597D","--shiki-dark-font-style":"italic","--shiki-light":"#6A737D","--shiki-light-font-style":"inherit"}},"// https://vitejs.dev/config/")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#D73A49"}},"export"),i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#D73A49"}}," default"),i("span",{style:{"--shiki-dark":"#7AA2F7","--shiki-light":"#6F42C1"}}," defineConfig"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"({")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#73DACA","--shiki-light":"#24292E"}},"  plugins"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," ["),i("span",{style:{"--shiki-dark":"#7AA2F7","--shiki-light":"#6F42C1"}},"react"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"()]"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-dark":"#73DACA","--shiki-light":"#24292E"}},"  build"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," {")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-dark":"#73DACA","--shiki-light":"#24292E"}},"    rollupOptions"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," {")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-dark":"#41A6B5","--shiki-light":"#24292E"}},"      external"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," ["),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'"),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"fs"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},","),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}}," '"),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"nodemailer"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},","),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}}," '"),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"node-fetch"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"]"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"    }"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"  }"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-dark":"#73DACA","--shiki-light":"#24292E"}},"  optimizeDeps"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," {")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-dark":"#73DACA","--shiki-light":"#24292E"}},"    exclude"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," ["),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'"),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"fs"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},","),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}}," '"),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"nodemailer"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},","),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}}," '"),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"node-fetch"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},"'"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"]"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"  }"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"})")])])])],-1)])),_:1}),h(k,{label:"Webpack and Angular version <=16"},{default:t(()=>a[1]||(a[1]=[i("p",null,[s("Instruct "),i("code",null,"webpack"),s(" not to include the "),i("code",null,"fs"),s(" package in the "),i("code",null,"frontend"),s(" bundle by adding the following JSON to the main section of the project's "),i("code",null,"package.json"),s(" file. "),i("em",null,"package.json")],-1),i("div",{class:"language-json vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"json"),i("pre",{class:"shiki shiki-themes tokyo-night github-light vp-code",style:{"--shiki-dark":"#a9b1d6","--shiki-light":"#24292e","--shiki-dark-bg":"#1a1b26","--shiki-light-bg":"#fff"},tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"browser"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#A9B1D6","--shiki-light":"#24292E"}},": "),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'   "'),i("span",{style:{"--shiki-dark":"#7AA2F7","--shiki-light":"#005CC5"}},"jsonwebtoken"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#FF9E64","--shiki-light":"#005CC5"}}," false")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"}")])])])],-1),i("ul",null,[i("li",null,"note that you'll need to restart the react/angular dev server.")],-1)])),_:1}),h(k,{label:"Angular 17"},{default:t(()=>a[2]||(a[2]=[i("ol",null,[i("li",null,[i("p",null,[s("You'll need to either remove "),i("code",null,"types"),s(" entry in the "),i("code",null,"tsconfig.app.json"),s(" or add the types you need to that types array.")])]),i("li",null,[i("p",null,[s("In "),i("code",null,"angular.json"),s(" you'll need to add an entry called "),i("code",null,"externalDependencies"),s(" to the "),i("code",null,"architect/build/options"),s(" key for your project")]),i("div",{class:"language-json vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"json"),i("pre",{class:"shiki shiki-themes tokyo-night github-light vp-code",style:{"--shiki-dark":"#a9b1d6","--shiki-light":"#24292e","--shiki-dark-bg":"#1a1b26","--shiki-light-bg":"#fff"},tabindex:"0"},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#51597D","--shiki-dark-font-style":"italic","--shiki-light":"#6A737D","--shiki-light-font-style":"inherit"}},"// angular.json")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'  "'),i("span",{style:{"--shiki-dark":"#7AA2F7","--shiki-light":"#005CC5"}},"$schema"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"./node_modules/@angular/cli/lib/config/schema.json"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'  "'),i("span",{style:{"--shiki-dark":"#7AA2F7","--shiki-light":"#005CC5"}},"version"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#FF9E64","--shiki-light":"#005CC5"}}," 1"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'  "'),i("span",{style:{"--shiki-dark":"#7AA2F7","--shiki-light":"#005CC5"}},"newProjectRoot"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"projects"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'  "'),i("span",{style:{"--shiki-dark":"#7AA2F7","--shiki-light":"#005CC5"}},"projects"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'    "'),i("span",{style:{"--shiki-dark":"#0DB9D7","--shiki-light":"#005CC5"}},"remult-angular-todo"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'      "'),i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#005CC5"}},"projectType"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"application"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'      "'),i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#005CC5"}},"schematics"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," {}"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'      "'),i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#005CC5"}},"root"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' ""'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'      "'),i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#005CC5"}},"sourceRoot"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"src"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'      "'),i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#005CC5"}},"prefix"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"app"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'      "'),i("span",{style:{"--shiki-dark":"#7DCFFF","--shiki-light":"#005CC5"}},"architect"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'        "'),i("span",{style:{"--shiki-dark":"#BB9AF7","--shiki-light":"#005CC5"}},"build"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'          "'),i("span",{style:{"--shiki-dark":"#E0AF68","--shiki-light":"#005CC5"}},"builder"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"@angular-devkit/build-angular:application"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'          "'),i("span",{style:{"--shiki-dark":"#E0AF68","--shiki-light":"#005CC5"}},"options"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'            "'),i("span",{style:{"--shiki-dark":"#0DB9D7","--shiki-light":"#005CC5"}},"outputPath"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"dist/remult-angular-todo"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'            "'),i("span",{style:{"--shiki-dark":"#0DB9D7","--shiki-light":"#005CC5"}},"index"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"src/index.html"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'            "'),i("span",{style:{"--shiki-dark":"#0DB9D7","--shiki-light":"#005CC5"}},"browser"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},' "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"src/main.ts"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'            "'),i("span",{style:{"--shiki-dark":"#0DB9D7","--shiki-light":"#005CC5"}},"externalDependencies"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," [")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'              "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"fs"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"')]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"            ]"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'            "'),i("span",{style:{"--shiki-dark":"#0DB9D7","--shiki-light":"#005CC5"}},"polyfills"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#005CC5"}},'"'),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},":"),i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}}," [")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'              "'),i("span",{style:{"--shiki-dark":"#9ECE6A","--shiki-light":"#032F62"}},"zone.js"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#032F62"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#9ABDF5","--shiki-light":"#24292E"}},"            ]"),i("span",{style:{"--shiki-dark":"#89DDFF","--shiki-light":"#24292E"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#51597D","--shiki-dark-font-style":"italic","--shiki-light":"#6A737D","--shiki-light-font-style":"inherit"}},"            //...")])])])])])],-1)])),_:1})]),_:1}),a[4]||(a[4]=n(`<h2 id="solution-2-abstract-the-call" tabindex="-1">Solution 2 - abstract the call <a class="header-anchor" href="#solution-2-abstract-the-call" aria-label="Permalink to &quot;Solution 2 - abstract the call&quot;">​</a></h2><p>Abstract the call and separate it to backend only files and <code>inject</code> it only when we are running on the server.</p><p><strong>Step 1</strong>, abstract the call - We&#39;ll remove the import to <code>fs,</code> and instead of calling specific <code>fs</code> methods, we&#39;ll define and call a method <code>writeToLog</code> that describes what we are trying to do:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light has-diff vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line diff remove"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> *</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> as</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> fs</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">fs</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// We&#39;ll define an abstract \`writeTiLog\` function and use it in our code</span></span>
<span class="line diff add"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">static</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;"> writeToLog</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#E0AF68;--shiki-light:#E36209;">textToWrite</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">:</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#005CC5;">string</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">=&gt;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">void</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#F7768E;--shiki-dark-font-weight:bold;--shiki-light:#D73A49;--shiki-light-font-weight:inherit;">...</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">..</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">@</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">BackendMethod</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">allowed</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;">true</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">})</span></span>
<span class="line"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">static</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> async</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> updatePriceOnBackend</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">priceToUpdate</span><span style="--shiki-dark:#A9B1D6;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">number</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">remult</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">?:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">Remult</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">){</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  let</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#24292E;"> products</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">repo</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">Products</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">find</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">  for</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> p</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> of</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> products</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">) {</span></span>
<span class="line"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">      p</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">price</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">value</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> +=</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> priceToUpdate</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">      await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> p</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">save</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  }</span></span>
<span class="line diff remove"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">  fs</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">appendFileSync</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">./logs/log.txt</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> new</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> Date</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">() </span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">+</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> +</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">user</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">name</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> +</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> update price</span><span style="--shiki-dark:#89DDFF;--shiki-light:#005CC5;">\\n</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line diff add"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">  ProductsController</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">writeToLog</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">new</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> Date</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">() </span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">+</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> +</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">user</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">name</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> +</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> update price</span><span style="--shiki-dark:#89DDFF;--shiki-light:#005CC5;">\\n</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span></span></code></pre></div><p>The method <code>writeToLog</code> that we&#39;ve defined serves as a place holder which we&#39;ll assign to in the remult of the server. It receives one parameter of type <code>string</code> and returns <code>void</code>.</p><p><strong>Step 2</strong>, implement the method: In the <code>/src/app/server</code> folder, we&#39;ll add a file called <code>log-writer.ts</code> with the following code:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> *</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> as</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> fs</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">fs</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">ProductsController</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">../products/products.controller</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line highlighted"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">ProductsController</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">writeToLog</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#E0AF68;--shiki-light:#E36209;"> what</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> fs</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">appendFileSync</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">./logs/log.txt</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> what</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span></code></pre></div><p>Here we set the implementation of the <code>writeToLog</code> method with the actual call to the <code>fs</code> module. This file is intended to only run on the server, so it&#39;ll not present us with any problem.</p><p><strong>Step 3</strong>, load the <code>log-writer.ts</code> file: In the <code>/src/app/server/server-init.ts</code> file, load the <code>log-writer.ts</code> file using an <code>import</code> statement</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">../app.module</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line highlighted"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">./log-writer</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;"> //load the log-writer.ts file</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">Pool</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">pg</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">config</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">dotenv</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">PostgresDataProvider</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> PostgresSchemaBuilder</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">@remult/server-postgres</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> *</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> as</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> passwordHash</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">password-hash</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">;</span></span></code></pre></div><p>That&#39;s it - it&#39;ll work now.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you&#39;re still getting an error - check that you have a <code>logs</code> folder on your project 😃</p></div><h2 id="additional-resources" tabindex="-1">Additional Resources <a class="header-anchor" href="#additional-resources" aria-label="Permalink to &quot;Additional Resources&quot;">​</a></h2><p>Check out this video where I implemented a similar solution when running into the same problem using <code>bcrypt</code>:</p>`,14)),a[5]||(a[5]=i("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/9lWQwAUcKEM?start=1035",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,-1))])}const u=p(F,[["render",D]]);export{A as __pageData,u as default};
