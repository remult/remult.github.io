import{_ as i,c as a,o as h,L as t}from"./chunks/framework.DdPzwmCl.js";const g=JSON.parse('{"title":"Authentication and Authorization","description":"","frontmatter":{},"headers":[],"relativePath":"tutorials/solid-start/auth.md","filePath":"tutorials/solid-start/auth.md","lastUpdated":1713693049000}'),n={name:"tutorials/solid-start/auth.md"};function k(l,s,p,e,r,d){return h(),a("div",null,s[0]||(s[0]=[t(`<h1 id="authentication-and-authorization" tabindex="-1">Authentication and Authorization <a class="header-anchor" href="#authentication-and-authorization" aria-label="Permalink to &quot;Authentication and Authorization&quot;">​</a></h1><p>Our todo app is nearly functionally complete, but it still doesn&#39;t fulfill a very basic requirement - that users should log in before they can view, create or modify tasks.</p><p>Remult provides a flexible mechanism that enables placing <strong>code-based authorization rules</strong> at various levels of the application&#39;s API. To maintain high code cohesion, <strong>entity and field-level authorization code should be placed in entity classes</strong>.</p><p><strong>Remult is completely unopinionated when it comes to user authentication.</strong> You are free to use any kind of authentication mechanism, and only required to provide Remult with an object which implements the Remult <code>UserInfo</code> interface.</p><p>In this tutorial, we&#39;ll use method outlined in the <a href="https://start.solidjs.com/advanced/session/" target="_blank" rel="noreferrer">Authentication</a> article of <code>SolidStart</code></p><h2 id="tasks-crud-requires-sign-in" tabindex="-1">Tasks CRUD Requires Sign-in <a class="header-anchor" href="#tasks-crud-requires-sign-in" aria-label="Permalink to &quot;Tasks CRUD Requires Sign-in&quot;">​</a></h2><p>This rule is implemented within the <code>Task</code> <code>@Entity</code> decorator, by modifying the value of the <code>allowApiCrud</code> property. This property can be set to a function that accepts a <code>Remult</code> argument and returns a <code>boolean</code> value. Let&#39;s use the <code>Allow.authenticated</code> function from Remult.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/app/shared/Task.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">@</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">Entity</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">tasks</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line highlighted"><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">    allowApiCrud</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> Allow</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">authenticated</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">})</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Import Allow</p><p>This code requires adding an import of <code>Allow</code> from <code>remult</code>.</p></div><p>After the browser refreshes, <strong>the list of tasks disappeared</strong> and the user can no longer create new tasks.</p><details class="details custom-block"><summary>Inspect the HTTP error returned by the API using cURL</summary><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;">curl</span><span style="--shiki-dark:#E0AF68;--shiki-light:#005CC5;"> -i</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;"> http://localhost:3000/api/tasks</span></span></code></pre></div></details><div class="danger custom-block"><p class="custom-block-title">Authorized server-side code can still modify tasks</p><p>Although client CRUD requests to <code>tasks</code> API endpoints now require a signed-in user, the API endpoint created for our <code>setAllCompleted</code> server function remains available to unauthenticated requests. Since the <code>allowApiCrud</code> rule we implemented does not affect the server-side code&#39;s ability to use the <code>Task</code> entity class for performing database CRUD operations, <strong>the <code>setAllCompleted</code> function still works as before</strong>.</p><p>To fix this, let&#39;s implement the same rule using the <code>@BackendMethod</code> decorator of the <code>setAllCompleted</code> method of <code>TasksController</code>.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/shared/TasksController.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">@</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">BackendMethod</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> allowed</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> Allow</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">authenticated</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> })</span></span></code></pre></div><p><strong>This code requires adding an import of <code>Allow</code> from <code>remult</code>.</strong></p></div><h2 id="user-authentication" tabindex="-1">User Authentication <a class="header-anchor" href="#user-authentication" aria-label="Permalink to &quot;User Authentication&quot;">​</a></h2><p>Let&#39;s set-up <code>SolidStart</code> authentication to authenticate users to our app.</p><h3 id="backend-setup" tabindex="-1">Backend setup <a class="header-anchor" href="#backend-setup" aria-label="Permalink to &quot;Backend setup&quot;">​</a></h3><ol><li><p>Create an <code>auth.ts</code> file in the <code>src</code> folder with the following code.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/auth.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">action</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> redirect</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">@solidjs/router</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">useSession</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">vinxi/http</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">type</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> UserInfo</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> validUsers</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;"> UserInfo</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">[]</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> [</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  {</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> id</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">1</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">Jane</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  {</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> id</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">2</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">Steve</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">export</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> async</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> function</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> getSession</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">  &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">use server</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  return</span><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> await</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> useSession</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">&lt;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">{ </span><span style="--shiki-dark:#73DACA;--shiki-light:#E36209;">user</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">?:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;"> UserInfo</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({</span></span>
<span class="line"><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">    password</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span></span>
<span class="line"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">      process</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">env</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">[</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">SESSION_SECRET</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">] </span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">||</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">      &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">Something secret used for development only</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  })</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">export</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> loginAction</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> action</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">async</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#E0AF68;--shiki-light:#E36209;">formData</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;"> FormData</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">  &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">use server</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> username</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> String</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">formData</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">get</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">username</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">))</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">  try</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">    const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> session</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> await</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> getSession</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">    const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> user</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> validUsers</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">find</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">((</span><span style="--shiki-dark:#E0AF68;--shiki-light:#E36209;">x</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">=&gt;</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> x</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">name</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> ===</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> username</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">user</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">) </span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">throw</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> Error</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">Invalid user, try &#39;Steve&#39; or &#39;Jane&#39;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">    await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> session</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">update</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({ </span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">user</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> })</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  } </span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">catch</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">err</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">) {</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">    return</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> err</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> as</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;"> Error</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  }</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">  throw</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> redirect</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">/</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">login</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">export</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> async</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> function</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> logout</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">  &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">use server</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> session</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> await</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> getSession</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  await</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> session</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">update</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({ </span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">user</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> null</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">!</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> })</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">export</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> async</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> function</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> getUser</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">  &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">use server</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> session</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> await</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> getSession</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  return</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> session</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">?.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">data</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">?.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">user</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span></span></code></pre></div><ul><li><p>The (very) simplistic <code>loginAction</code> endpoint accepts a <code>FormData</code> with a <code>username</code> property, looks it up in a predefined dictionary of valid users and, if found, sets the user&#39;s information to the <code>user</code> property of the request&#39;s <code>session</code>.</p></li><li><p>The <code>logout</code> function clears the <code>user</code> value from the current session.</p></li><li><p>The <code>getUser</code> function extracts the value of the current user from the session and returns it.</p></li></ul></li><li><p>Create a <code>src/routes/login.tsx</code> file, and place the following code to it:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/routes/login.tsx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">useSubmission</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">@solidjs/router</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">loginAction</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">../auth.js</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">Show</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">solid-js</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">export</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> default</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> function</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> Home</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> sub</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> useSubmission</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">loginAction</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  return</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">h1</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#9AA5CE;--shiki-light:#24292E;">Login</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">h1</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">main</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">        &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">form</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> action</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">loginAction</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> method</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">post</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">          &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">input</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">            type</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">text</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">            name</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">username</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">            placeholder</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">Username, try Steve or Jane</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">          /&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">          &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#9AA5CE;--shiki-light:#24292E;">Sign in</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">        &lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">form</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">        &lt;</span><span style="--shiki-dark:#DE5971;--shiki-light:#005CC5;">Show</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> when</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">sub</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">result</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">?.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">message}</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">sub</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">result</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">?.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">message}</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&lt;/</span><span style="--shiki-dark:#DE5971;--shiki-light:#005CC5;">Show</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">main</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  )</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span></span></code></pre></div></li><li><p>Replace the content of the <code>src/routes/index.tsx</code> file with the following code:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/routes/index.tsx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">getUser</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> logout</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">../auth.js</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">useNavigate</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">@solidjs/router</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">Show</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> createSignal</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> onMount</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">solid-js</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">remult</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> Todo</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">../components/Todo.jsx</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">export</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> default</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> function</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> Home</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  const</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;">authenticated</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> setAuthenticated</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">]</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> createSignal</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;">false</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> navigate</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> useNavigate</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">  onMount</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">async</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> () </span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">=&gt;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">    remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">user</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> await</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> getUser</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">    if</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">authenticated</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()) </span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">setAuthenticated</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;">true</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;">    else</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> navigate</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">/login</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">  return</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;</span><span style="--shiki-dark:#DE5971;--shiki-light:#005CC5;">Show</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> when</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">authenticated</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">h1</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#9AA5CE;--shiki-light:#24292E;">Todos</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">h1</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">header</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#9AA5CE;--shiki-light:#24292E;">        Hello </span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">user</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">?.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">name}</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">        &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">          onClick</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">async</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> ()</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> logout</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">then</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(()</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> navigate</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">/login</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&#39;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">))</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">        &gt;</span></span>
<span class="line"><span style="--shiki-dark:#9AA5CE;--shiki-light:#24292E;">          Logout</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">        &lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">header</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;</span><span style="--shiki-dark:#DE5971;--shiki-light:#005CC5;">Todo</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;"> /&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;/</span><span style="--shiki-dark:#DE5971;--shiki-light:#005CC5;">Show</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  )</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span></span></code></pre></div><ul><li>We use the <code>onMount</code> hook the update the <code>remult.user</code> in the <code>frontend</code>, based on the user from the current session. That user info can then be used in the front-end for user roles based content</li></ul></li></ol><div class="warning custom-block"><p class="custom-block-title">Solid Hydration error or page not found</p><p>As we were working on this tutorial with the rc version of solid start we got this error - we found that <strong>hard refreshing the site (Ctrl F5) solves it</strong>.</p></div><h3 id="connect-remult-solid-start-on-the-backend" tabindex="-1">Connect remult-solid-start On the Backend <a class="header-anchor" href="#connect-remult-solid-start-on-the-backend" aria-label="Permalink to &quot;Connect remult-solid-start On the Backend&quot;">​</a></h3><p>Once an authentication flow is established, integrating it with Remult in the backend is as simple as providing Remult with a <code>getUser</code> function from the <code>src/auth.ts</code></p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/api.ts</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">getUser</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">./auth.js</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">export</span><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;"> const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> api</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> remultSolidStart</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({</span></span>
<span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">  //...</span></span>
<span class="line highlighted"><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">  getUser</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">})</span></span>
<span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">//...</span></span></code></pre></div><p>The todo app now supports signing in and out, with <strong>all access restricted to signed in users only</strong>.</p><h2 id="role-based-authorization" tabindex="-1">Role-based Authorization <a class="header-anchor" href="#role-based-authorization" aria-label="Permalink to &quot;Role-based Authorization&quot;">​</a></h2><p>Usually, not all application users have the same privileges. Let&#39;s define an <code>admin</code> role for our todo app, and enforce the following authorization rules:</p><ul><li>All signed in users can see the list of tasks.</li><li>All signed in users can set specific tasks as <code>completed</code>.</li><li>Only users belonging to the <code>admin</code> role can create, delete or edit the titles of tasks.</li></ul><ol><li>Modify the highlighted lines in the <code>Task</code> entity class to reflect the top three authorization rules.</li></ol><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/shared/Task.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">import</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> { </span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;">Allow</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> Entity</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#24292E;"> Fields</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;"> from</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">remult</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">@</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">Entity</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">&lt;</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;">Task</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">tasks</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">  allowApiCrud</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> Allow</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">authenticated</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span></span>
<span class="line highlighted"><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">  allowApiInsert</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">admin</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span></span>
<span class="line highlighted"><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">  allowApiDelete</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">admin</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">})</span></span>
<span class="line"><span style="--shiki-dark:#7DCFFF;--shiki-light:#D73A49;">export</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> class</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#6F42C1;"> Task</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> {</span></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">  @</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">Fields</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">uuid</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span>
<span class="line"><span style="--shiki-dark:#73DACA;--shiki-light:#E36209;">  id</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">!:</span><span style="--shiki-dark:#0DB9D7;--shiki-light:#005CC5;"> string</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">  @</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">Fields</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">string</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">({</span></span>
<span class="line"><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">    validate</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span><span style="--shiki-dark:#E0AF68;--shiki-light:#E36209;">task</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> task</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">title</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#005CC5;">length</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> &gt;</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> 2</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> ||</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">Too Short</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;">    allowApiUpdate</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">admin</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  })</span></span>
<span class="line highlighted"><span style="--shiki-dark:#73DACA;--shiki-light:#E36209;">  title</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">  @</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">Fields</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">boolean</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span></span>
<span class="line"><span style="--shiki-dark:#73DACA;--shiki-light:#E36209;">  completed</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#FF9E64;--shiki-light:#005CC5;"> false</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">}</span></span></code></pre></div><ol start="2"><li>Let&#39;s give the user <em>&quot;Jane&quot;</em> the <code>admin</code> role by modifying the <code>roles</code> array of her <code>validUsers</code> entry.</li></ol><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/auth.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#9D7CD8;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">const</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#005CC5;"> validUsers</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;"> =</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> [</span></span>
<span class="line highlighted"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  {</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> id</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">1</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">Jane</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> roles</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> [</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">admin</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">]</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">  {</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> id</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">2</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#73DACA;--shiki-light:#24292E;"> name</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">:</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">Steve</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> }</span></span>
<span class="line"><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">]</span></span></code></pre></div><p><strong>Sign in to the app as <em>&quot;Steve&quot;</em> to test that the actions restricted to <code>admin</code> users are not allowed. 🔒</strong></p><h2 id="role-based-authorization-on-the-frontend" tabindex="-1">Role-based Authorization on the Frontend <a class="header-anchor" href="#role-based-authorization-on-the-frontend" aria-label="Permalink to &quot;Role-based Authorization on the Frontend&quot;">​</a></h2><p>From a user experience perspective it only makes sense that users that can&#39;t add or delete, would not see these buttons.</p><p>Let&#39;s reuse the same definitions on the Frontend.</p><p>We&#39;ll use the entity&#39;s metadata to only show the form if the user is allowed to insert</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/components/Todo.tsx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">main</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">  &lt;</span><span style="--shiki-dark:#DE5971;--shiki-light:#005CC5;">Show</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> when</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">taskRepo</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">metadata</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">apiInsertAllowed</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">form</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> onSubmit</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">addTask</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">input</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">        value</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">newTaskTitle</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">        placeholder</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">What needs to be done?</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">        onInput</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#E0AF68;--shiki-light:#E36209;">e</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> setNewTaskTitle</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">e</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">currentTarget</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">value</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      /&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#9AA5CE;--shiki-light:#24292E;">Add</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">form</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">  &lt;/</span><span style="--shiki-dark:#DE5971;--shiki-light:#005CC5;">Show</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#9AA5CE;--shiki-light:#24292E;">  ...</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">main</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">Import Show</p><p>This code requires adding an import of <code>Show</code> from <code>solid-js</code>.</p></div><p>And let&#39;s do the same for the <code>delete</code> button:</p><div class="language-tsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">tsx</span><pre class="shiki shiki-themes tokyo-night github-light vp-code" style="--shiki-dark:#a9b1d6;--shiki-light:#24292e;--shiki-dark-bg:#1a1b26;--shiki-light-bg:#fff;" tabindex="0"><code><span class="line"><span style="--shiki-dark:#51597D;--shiki-dark-font-style:italic;--shiki-light:#6A737D;--shiki-light-font-style:inherit;">// src/components/Todo.tsx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-dark-font-style:italic;--shiki-light:#D73A49;--shiki-light-font-style:inherit;">return</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;"> (</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">  &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">div</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">input</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">      type</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">checkbox</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">      checked</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">task</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">completed}</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">      oninput</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#E0AF68;--shiki-light:#E36209;">e</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> setCompleted</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">e</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">target</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">checked</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    /&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">input</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">      value</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">task</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">title}</span></span>
<span class="line"><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;">      onInput</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#E0AF68;--shiki-light:#E36209;">e</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#D73A49;"> =&gt;</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;"> setTasks</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">(</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">i</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;"> &quot;</span><span style="--shiki-dark:#9ECE6A;--shiki-light:#032F62;">title</span><span style="--shiki-dark:#89DDFF;--shiki-light:#032F62;">&quot;</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">,</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;"> e</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">target</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">value</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">)</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    /&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> onClick</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">saveTask</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#9AA5CE;--shiki-light:#24292E;">Save</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;</span><span style="--shiki-dark:#DE5971;--shiki-light:#005CC5;">Show</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> when</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">taskRepo</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">metadata</span><span style="--shiki-dark:#89DDFF;--shiki-light:#24292E;">.</span><span style="--shiki-dark:#7AA2F7;--shiki-light:#6F42C1;">apiDeleteAllowed</span><span style="--shiki-dark:#9ABDF5;--shiki-light:#24292E;">()</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">      &lt;</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span><span style="--shiki-dark:#BB9AF7;--shiki-light:#6F42C1;"> onClick</span><span style="--shiki-dark:#89DDFF;--shiki-light:#D73A49;">=</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">{</span><span style="--shiki-dark:#C0CAF5;--shiki-light:#24292E;">deleteTask</span><span style="--shiki-dark:#7DCFFF;--shiki-light:#24292E;">}</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span><span style="--shiki-dark:#9AA5CE;--shiki-light:#24292E;">Delete</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">button</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line highlighted"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">    &lt;/</span><span style="--shiki-dark:#DE5971;--shiki-light:#005CC5;">Show</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">  &lt;/</span><span style="--shiki-dark:#F7768E;--shiki-light:#22863A;">div</span><span style="--shiki-dark:#BA3C97;--shiki-light:#24292E;">&gt;</span></span></code></pre></div><p>This way we can keep the frontend consistent with the <code>api</code>&#39;s Authorization rules</p><ul><li>Note We send the <code>task</code> to the <code>apiDeleteAllowed</code> method, because the <code>apiDeleteAllowed</code> option, can be sophisticated and can also be based on the specific item&#39;s values.</li></ul>`,39)]))}const y=i(n,[["render",k]]);export{g as __pageData,y as default};
