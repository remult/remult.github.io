import{_ as s,c as a,o as n,a5 as l}from"./chunks/framework.QXCuR9m2.js";const h=JSON.parse('{"title":"Connecting to a Database","description":"","frontmatter":{},"headers":[],"relativePath":"docs/databases.md","filePath":"docs/databases.md","lastUpdated":1700759061000}'),o={name:"docs/databases.md"},p=l(`<h1 id="connecting-to-a-database" tabindex="-1">Connecting to a Database <a class="header-anchor" href="#connecting-to-a-database" aria-label="Permalink to &quot;Connecting to a Database&quot;">​</a></h1><p>To set a database connection for Remult, set the <code>dataProvider</code> property of the <code>options</code> argument of the remult Express middleware.</p><p>Here are examples of connecting to some commonly used back-end databases:</p><ul><li>Postgres <ul><li><a href="#using-node-postgres-pghttpsnode-postgrescom-only">Using <code>node-postgres</code> only</a></li><li><a href="#using-knexjshttpknexjsorg">Using Knex.js</a></li></ul></li><li><a href="#mysql">MySQL</a></li><li><a href="#mongodb">MongoDB</a></li><li><a href="#sqlite">SQLite</a></li><li><a href="#microsoft-sql-server">Microsoft SQL Server</a></li><li><a href="#oracle">Oracle</a></li></ul><p>Remult can also be used to connect entities to local <a href="#frontend-databases">frontend databases</a>.</p><h2 id="postgres" tabindex="-1">Postgres <a class="header-anchor" href="#postgres" aria-label="Permalink to &quot;Postgres&quot;">​</a></h2><h3 id="using-node-postgres-pg-only" tabindex="-1">Using <a href="https://node-postgres.com/" target="_blank" rel="noreferrer">node-postgres (pg)</a> only <a class="header-anchor" href="#using-node-postgres-pg-only" aria-label="Permalink to &quot;Using [node-postgres (pg)](https://node-postgres.com/) only&quot;">​</a></h3><p>Install node-postgres:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> pg</span></span></code></pre></div><p>Modify the API server&#39;s main module:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> express</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &quot;express&quot;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultExpress</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-express&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">createPostgresDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/postgres&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> app</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">express</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> connectionString</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&quot;postgres://user:password@host:5432/database&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#DCDCAA;">  remultExpress</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">    dataProvider:</span></span>
<span class="line highlighted"><span style="color:#DCDCAA;">      createPostgresDataProvider</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        connectionString</span><span style="color:#6A9955;"> // default: process.env[&quot;DATABASE_URL&quot;]</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">      })</span></span>
<span class="line"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><ul><li>If <code>connectionString</code> is not provided the <code>DATABASE_URL</code>environment will be used</li></ul><details class="details custom-block"><summary>Additional options</summary><ul><li><strong>configuration</strong> - can be set to the <code>pg.PoolConfig</code> options object or to <code>heroku</code>. When set to <code>heroku</code>, it&#39;ll: <ul><li>Use ssl, with the <code>rejectUnauthorized:false</code> flag as required by postgres on heroku</li><li>Disable ssl for non production environments (<code>process.env[&quot;NODE_ENV&quot;] !== &quot;production&quot;</code>). To use ssl also for dev, set the <code>sslInDev</code> option to true.</li></ul></li><li><strong>sslInDev</strong> - see <code>configuration:&quot;heroku&quot;</code></li></ul></details><h3 id="using-knex-js" tabindex="-1">Using <a href="http://knexjs.org/" target="_blank" rel="noreferrer">Knex.js</a> <a class="header-anchor" href="#using-knex-js" aria-label="Permalink to &quot;Using [Knex.js](http://knexjs.org/)&quot;">​</a></h3><p>Install knex and node-postgres:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> knex</span><span style="color:#CE9178;"> pg</span></span></code></pre></div><p>Modify the API server&#39;s main module:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> express</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &quot;express&quot;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultExpress</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-express&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">createKnexDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-knex&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> app</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">express</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#DCDCAA;">  remultExpress</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">    dataProvider:</span><span style="color:#DCDCAA;"> createKnexDataProvider</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#6A9955;">      // Knex client configuration for Postgres</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      client:</span><span style="color:#CE9178;"> &quot;pg&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      connection:</span><span style="color:#CE9178;"> &quot;postgres://user:password@host:5432/database&quot;</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">    })</span></span>
<span class="line"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><h2 id="mysql" tabindex="-1">MySQL <a class="header-anchor" href="#mysql" aria-label="Permalink to &quot;MySQL&quot;">​</a></h2><p>Install knex and mysql2:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> knex</span><span style="color:#CE9178;"> mysql2</span></span></code></pre></div><p>Modify the API server&#39;s main module:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> express</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &quot;express&quot;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultExpress</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-express&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">createKnexDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-knex&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> app</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">express</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#DCDCAA;">  remultExpress</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">    dataProvider:</span><span style="color:#DCDCAA;"> createKnexDataProvider</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#6A9955;">      // Knex client configuration for MySQL</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      client:</span><span style="color:#CE9178;"> &quot;mysql2&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      connection:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        user:</span><span style="color:#CE9178;"> &quot;your_database_user&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        password:</span><span style="color:#CE9178;"> &quot;your_database_password&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        host:</span><span style="color:#CE9178;"> &quot;127.0.0.1&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        database:</span><span style="color:#CE9178;"> &quot;test&quot;</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">      }</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">    })</span></span>
<span class="line"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><h2 id="mongodb" tabindex="-1">MongoDB <a class="header-anchor" href="#mongodb" aria-label="Permalink to &quot;MongoDB&quot;">​</a></h2><p>Install mongodb:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> mongodb</span></span></code></pre></div><p>Modify the API server&#39;s main module:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> express</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &quot;express&quot;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultExpress</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-express&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">MongoClient</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;mongodb&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">MongoDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-mongo&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> app</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">express</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#DCDCAA;">  remultExpress</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#DCDCAA;">    dataProvider</span><span style="color:#9CDCFE;">:</span><span style="color:#569CD6;"> async</span><span style="color:#D4D4D4;"> () </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line highlighted"><span style="color:#569CD6;">      const</span><span style="color:#4FC1FF;"> client</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> MongoClient</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;mongodb://localhost:27017/local&quot;</span><span style="color:#D4D4D4;">)</span></span>
<span class="line highlighted"><span style="color:#C586C0;">      await</span><span style="color:#9CDCFE;"> client</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">connect</span><span style="color:#D4D4D4;">()</span></span>
<span class="line highlighted"><span style="color:#C586C0;">      return</span><span style="color:#569CD6;"> new</span><span style="color:#DCDCAA;"> MongoDataProvider</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">client</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">db</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;test&quot;</span><span style="color:#D4D4D4;">), </span><span style="color:#9CDCFE;">client</span><span style="color:#D4D4D4;">)</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">    }</span></span>
<span class="line"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><h3 id="using-objectid-in-mongodb" tabindex="-1">Using ObjectId in Mongodb <a class="header-anchor" href="#using-objectid-in-mongodb" aria-label="Permalink to &quot;Using ObjectId in Mongodb&quot;">​</a></h3><p>To indicate that a column is of type object id, change it&#39;s <code>dbFieldType</code> to <code>dbid</code></p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#D4D4D4;">@</span><span style="color:#DCDCAA;">Entity</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;tasks&#39;</span><span style="color:#D4D4D4;">)#</span></span>
<span class="line"><span style="color:#569CD6;">class</span><span style="color:#4EC9B0;"> task</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#D4D4D4;">  @</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">string</span><span style="color:#D4D4D4;">({</span></span>
<span class="line"><span style="color:#9CDCFE;">    dbName:</span><span style="color:#CE9178;"> &#39;_id&#39;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#9CDCFE;">    valueConverter:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line"><span style="color:#9CDCFE;">      fieldTypeInDb:</span><span style="color:#CE9178;"> &#39;dbid&#39;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line"><span style="color:#D4D4D4;">    },</span></span>
<span class="line"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#9CDCFE;">  id</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;&#39;</span></span>
<span class="line"><span style="color:#D4D4D4;">  @</span><span style="color:#9CDCFE;">Fields</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">string</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"><span style="color:#9CDCFE;">  title</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;&#39;</span></span>
<span class="line"><span style="color:#D4D4D4;">}</span></span></code></pre></div><h2 id="sqlite" tabindex="-1">SQLite <a class="header-anchor" href="#sqlite" aria-label="Permalink to &quot;SQLite&quot;">​</a></h2><p>Install knex and sqlite3:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> knex</span><span style="color:#CE9178;"> sqlite3</span></span></code></pre></div><p>Modify the API server&#39;s main module:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> express</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &quot;express&quot;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultExpress</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-express&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">createKnexDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-knex&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> app</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">express</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#DCDCAA;">  remultExpress</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">    dataProvider:</span><span style="color:#DCDCAA;"> createKnexDataProvider</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#6A9955;">      // Knex client configuration for SQLite</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      client:</span><span style="color:#CE9178;"> &quot;sqlite3&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      connection:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        filename:</span><span style="color:#CE9178;"> &quot;./mydb.sqlite&quot;</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">      }</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">    })</span></span>
<span class="line"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><h2 id="microsoft-sql-server" tabindex="-1">Microsoft SQL Server <a class="header-anchor" href="#microsoft-sql-server" aria-label="Permalink to &quot;Microsoft SQL Server&quot;">​</a></h2><p>Install knex and tedious:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> knex</span><span style="color:#CE9178;"> tedious</span></span></code></pre></div><p>Modify the API server&#39;s main module:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> express</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &quot;express&quot;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultExpress</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-express&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">createKnexDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-knex&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> app</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">express</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#DCDCAA;">  remultExpress</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">    dataProvider:</span><span style="color:#DCDCAA;"> createKnexDataProvider</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#6A9955;">      // Knex client configuration for MSSQL</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      client:</span><span style="color:#CE9178;"> &quot;mssql&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      connection:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        server:</span><span style="color:#CE9178;"> &quot;127.0.0.1&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        database:</span><span style="color:#CE9178;"> &quot;test&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        user:</span><span style="color:#CE9178;"> &quot;your_database_user&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        password:</span><span style="color:#CE9178;"> &quot;your_database_password&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        options:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">          enableArithAbort:</span><span style="color:#569CD6;"> true</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">          encrypt:</span><span style="color:#569CD6;"> false</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">          instanceName:</span><span style="color:#CE9178;"> \`sqlexpress\`</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">        }</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">      }</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">    })</span></span>
<span class="line"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><h2 id="oracle" tabindex="-1">Oracle <a class="header-anchor" href="#oracle" aria-label="Permalink to &quot;Oracle&quot;">​</a></h2><p>Install knex and oracledb:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#DCDCAA;">npm</span><span style="color:#CE9178;"> i</span><span style="color:#CE9178;"> knex</span><span style="color:#CE9178;"> oracledb</span></span></code></pre></div><p>Modify the API server&#39;s main module:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> express</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &quot;express&quot;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultExpress</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-express&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">createKnexDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-knex&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> app</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">express</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#DCDCAA;">  remultExpress</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">    dataProvider:</span><span style="color:#DCDCAA;"> createKnexDataProvider</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#6A9955;">      // Knex client configuration for Oracle</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      client:</span><span style="color:#CE9178;"> &quot;oracledb&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">      connection:</span><span style="color:#D4D4D4;"> {</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        user:</span><span style="color:#CE9178;"> &quot;your_database_user&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        password:</span><span style="color:#CE9178;"> &quot;your_database_password&quot;</span><span style="color:#D4D4D4;">,</span></span>
<span class="line highlighted"><span style="color:#9CDCFE;">        connectString:</span><span style="color:#CE9178;"> &quot;SERVER&quot;</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">      }</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">    })</span></span>
<span class="line"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><h2 id="json-files" tabindex="-1">JSON Files <a class="header-anchor" href="#json-files" aria-label="Permalink to &quot;JSON Files&quot;">​</a></h2><p>Modify the API server&#39;s main module:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#6A9955;">// index.ts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#9CDCFE;"> express</span><span style="color:#C586C0;"> from</span><span style="color:#CE9178;"> &quot;express&quot;</span></span>
<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">remultExpress</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/remult-express&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">JsonDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult&quot;</span></span>
<span class="line highlighted"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">JsonEntityFileStorage</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &quot;remult/server&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#569CD6;">const</span><span style="color:#4FC1FF;"> app</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">express</span><span style="color:#D4D4D4;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9CDCFE;">app</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">use</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#DCDCAA;">  remultExpress</span><span style="color:#D4D4D4;">({</span></span>
<span class="line highlighted"><span style="color:#DCDCAA;">    dataProvider</span><span style="color:#9CDCFE;">:</span><span style="color:#569CD6;"> async</span><span style="color:#D4D4D4;"> () </span><span style="color:#569CD6;">=&gt;</span></span>
<span class="line highlighted"><span style="color:#569CD6;">      new</span><span style="color:#DCDCAA;"> JsonDataProvider</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> JsonEntityFileStorage</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&quot;./db&quot;</span><span style="color:#D4D4D4;">))</span></span>
<span class="line highlighted"><span style="color:#D4D4D4;">  })</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Note</p><p>This is the default database used by Remult if no other <code>dataProvider</code> is set.</p></div><h2 id="frontend-databases" tabindex="-1">Frontend Databases <a class="header-anchor" href="#frontend-databases" aria-label="Permalink to &quot;Frontend Databases&quot;">​</a></h2><p>Although the common use case of <code>Remult</code> on the front end, is to call the backend using rest api, in some use cases using a local in browser database can be useful.</p><h3 id="local-storage" tabindex="-1">Local Storage <a class="header-anchor" href="#local-storage" aria-label="Permalink to &quot;Local Storage&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">JsonDataProvider</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Remult</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;remult&#39;</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> const</span><span style="color:#4FC1FF;"> remultLocalStorage</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Remult</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> JsonDataProvider</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">localStorage</span><span style="color:#D4D4D4;">))</span></span></code></pre></div><h3 id="session-storage" tabindex="-1">Session Storage <a class="header-anchor" href="#session-storage" aria-label="Permalink to &quot;Session Storage&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">JsonDataProvider</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">Remult</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;remult&#39;</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> const</span><span style="color:#4FC1FF;"> remultSessionStorage</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Remult</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#569CD6;">  new</span><span style="color:#DCDCAA;"> JsonDataProvider</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">sessionStorage</span><span style="color:#D4D4D4;">),</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><h3 id="web-sql" tabindex="-1">Web Sql <a class="header-anchor" href="#web-sql" aria-label="Permalink to &quot;Web Sql&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">Remult</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">SqlDatabase</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">WebSqlDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;remult&#39;</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> const</span><span style="color:#4FC1FF;"> remultWebSql</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Remult</span><span style="color:#D4D4D4;">(</span></span>
<span class="line"><span style="color:#569CD6;">  new</span><span style="color:#DCDCAA;"> SqlDatabase</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> WebSqlDataProvider</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;db&#39;</span><span style="color:#D4D4D4;">)),</span></span>
<span class="line"><span style="color:#D4D4D4;">)</span></span></code></pre></div><h3 id="in-memory-object-array" tabindex="-1">In Memory object array <a class="header-anchor" href="#in-memory-object-array" aria-label="Permalink to &quot;In Memory object array&quot;">​</a></h3><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki dark-plus vp-code" tabindex="0"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">Remult</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">InMemoryDataProvider</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#CE9178;"> &#39;remult&#39;</span></span>
<span class="line"><span style="color:#C586C0;">export</span><span style="color:#569CD6;"> const</span><span style="color:#4FC1FF;"> remult</span><span style="color:#D4D4D4;"> = </span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> Remult</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">new</span><span style="color:#DCDCAA;"> InMemoryDataProvider</span><span style="color:#D4D4D4;">())</span></span></code></pre></div>`,60),e=[p];function t(r,c,D,i,y,C){return n(),a("div",null,e)}const u=s(o,[["render",t]]);export{h as __pageData,u as default};
