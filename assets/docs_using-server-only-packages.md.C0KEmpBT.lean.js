import{_ as c,D as e,c as r,I as o,w as n,a5 as p,o as D,j as s,a as l}from"./chunks/framework.QXCuR9m2.js";const S=JSON.parse('{"title":"Backend only code","description":"","frontmatter":{},"headers":[],"relativePath":"docs/using-server-only-packages.md","filePath":"docs/using-server-only-packages.md","lastUpdated":1708339588000}'),i={name:"docs/using-server-only-packages.md"},y=p("",11),d=s("h3",{id:"option-1-exclude-in-vite-config",tabindex:"-1"},[l("Option 1 - exclude in "),s("code",null,"vite.config"),l(),s("a",{class:"header-anchor",href:"#option-1-exclude-in-vite-config","aria-label":'Permalink to "Option 1 - exclude in `vite.config`"'},"​")],-1),C=s("p",null,[l("Instruct vite to exclude the "),s("code",null,"server-only"),l(" packages from the bundle")],-1),u=s("div",{class:"language-ts"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki dark-plus has-diff vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C586C0"}},"import"),s("span",{style:{color:"#D4D4D4"}}," { "),s("span",{style:{color:"#9CDCFE"}},"defineConfig"),s("span",{style:{color:"#D4D4D4"}}," } "),s("span",{style:{color:"#C586C0"}},"from"),s("span",{style:{color:"#CE9178"}}," 'vite'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0"}},"import"),s("span",{style:{color:"#9CDCFE"}}," react"),s("span",{style:{color:"#C586C0"}}," from"),s("span",{style:{color:"#CE9178"}}," '@vitejs/plugin-react'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"// https://vitejs.dev/config/")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0"}},"export"),s("span",{style:{color:"#C586C0"}}," default"),s("span",{style:{color:"#DCDCAA"}}," defineConfig"),s("span",{style:{color:"#D4D4D4"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},"  plugins:"),s("span",{style:{color:"#D4D4D4"}}," ["),s("span",{style:{color:"#DCDCAA"}},"react"),s("span",{style:{color:"#D4D4D4"}},"()],")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#9CDCFE"}},"  build:"),s("span",{style:{color:"#D4D4D4"}}," {    ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#9CDCFE"}},"    rollupOptions:"),s("span",{style:{color:"#D4D4D4"}}," {      ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#9CDCFE"}},"      external:"),s("span",{style:{color:"#D4D4D4"}}," ["),s("span",{style:{color:"#CE9178"}},"'fs'"),s("span",{style:{color:"#D4D4D4"}},", "),s("span",{style:{color:"#CE9178"}},"'nodemailer'"),s("span",{style:{color:"#D4D4D4"}},", "),s("span",{style:{color:"#CE9178"}},"'node-fetch'"),s("span",{style:{color:"#D4D4D4"}},"], ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#D4D4D4"}},"    }, ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#D4D4D4"}},"  }, ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#9CDCFE"}},"  optimizeDeps:"),s("span",{style:{color:"#D4D4D4"}}," {    ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#9CDCFE"}},"    exclude:"),s("span",{style:{color:"#D4D4D4"}}," ["),s("span",{style:{color:"#CE9178"}},"'fs'"),s("span",{style:{color:"#D4D4D4"}},", "),s("span",{style:{color:"#CE9178"}},"'nodemailer'"),s("span",{style:{color:"#D4D4D4"}},", "),s("span",{style:{color:"#CE9178"}},"'node-fetch'"),s("span",{style:{color:"#D4D4D4"}},"], ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#D4D4D4"}},"  }, ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"})")])])])],-1),h=s("h3",{id:"option-2-vite-plugin-stripper",tabindex:"-1"},[l("Option 2 - "),s("code",null,"vite-plugin-stripper"),l(),s("a",{class:"header-anchor",href:"#option-2-vite-plugin-stripper","aria-label":'Permalink to "Option 2 - `vite-plugin-stripper`"'},"​")],-1),f=s("p",null,[s("a",{href:"https://www.kitql.dev/docs/tools/07_vite-plugin-stripper",target:"_blank",rel:"noreferrer"},"vite-plugin-stripper"),l(" is a "),s("code",null,"vite"),l(" plugin that can be used to remove contents of methods with the "),s("code",null,"@BackendMethod"),l(" decorator.")],-1),E=s("div",{class:"language-bash"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki dark-plus vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"npm"),s("span",{style:{color:"#CE9178"}}," i"),s("span",{style:{color:"#569CD6"}}," --save-dev"),s("span",{style:{color:"#CE9178"}}," vite-plugin-stripper")])])])],-1),g=s("div",{class:"language-ts"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"ts"),s("pre",{class:"shiki dark-plus has-diff vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C586C0"}},"import"),s("span",{style:{color:"#D4D4D4"}}," { "),s("span",{style:{color:"#9CDCFE"}},"defineConfig"),s("span",{style:{color:"#D4D4D4"}}," } "),s("span",{style:{color:"#C586C0"}},"from"),s("span",{style:{color:"#CE9178"}}," 'vite'")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#C586C0"}},"import"),s("span",{style:{color:"#D4D4D4"}}," { "),s("span",{style:{color:"#9CDCFE"}},"stripper"),s("span",{style:{color:"#D4D4D4"}}," } "),s("span",{style:{color:"#C586C0"}},"from"),s("span",{style:{color:"#CE9178"}}," 'vite-plugin-stripper'")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C586C0"}},"export"),s("span",{style:{color:"#C586C0"}}," default"),s("span",{style:{color:"#DCDCAA"}}," defineConfig"),s("span",{style:{color:"#D4D4D4"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},"  plugins:"),s("span",{style:{color:"#D4D4D4"}}," [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#DCDCAA"}},"    react"),s("span",{style:{color:"#D4D4D4"}},"(),")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#DCDCAA"}},"    stripper"),s("span",{style:{color:"#D4D4D4"}},"({ "),s("span",{style:{color:"#9CDCFE"}},"decorators:"),s("span",{style:{color:"#D4D4D4"}}," ["),s("span",{style:{color:"#CE9178"}},"'BackendMethod'"),s("span",{style:{color:"#D4D4D4"}},"] }), ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"})")])])])],-1),m=s("p",null,[l("Instruct "),s("code",null,"webpack"),l(" not to include the "),s("code",null,"fs"),l(" package in the "),s("code",null,"frontend"),l(" bundle by adding the following JSON to the main section of the project's "),s("code",null,"package.json"),l(" file. "),s("em",null,"package.json")],-1),F=s("div",{class:"language-json"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"json"),s("pre",{class:"shiki dark-plus vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#CE9178"}},'"browser"'),s("span",{style:{color:"#D4D4D4"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'   "jsonwebtoken"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#569CD6"}},"false")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"}")])])])],-1),b=s("ul",null,[s("li",null,"note that you'll need to restart the react/angular dev server.")],-1),v=s("ol",null,[s("li",null,[s("p",null,[l("You'll need to either remove "),s("code",null,"types"),l(" entry in the "),s("code",null,"tsconfig.app.json"),l(" or add the types you need to that types array.")])]),s("li",null,[s("p",null,[l("In "),s("code",null,"angular.json"),l(" you'll need to add an entry called "),s("code",null,"externalDependencies"),l(" to the "),s("code",null,"architect/build/options"),l(" key for your project")]),s("div",{class:"language-json"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"json"),s("pre",{class:"shiki dark-plus vp-code",tabindex:"0"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"// angular.json")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'  "$schema"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'"./node_modules/@angular/cli/lib/config/schema.json"'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'  "version"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#B5CEA8"}},"1"),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'  "newProjectRoot"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'"projects"'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'  "projects"'),s("span",{style:{color:"#D4D4D4"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'    "remult-angular-todo"'),s("span",{style:{color:"#D4D4D4"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'      "projectType"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'"application"'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'      "schematics"'),s("span",{style:{color:"#D4D4D4"}},": {},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'      "root"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'""'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'      "sourceRoot"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'"src"'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'      "prefix"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'"app"'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'      "architect"'),s("span",{style:{color:"#D4D4D4"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'        "build"'),s("span",{style:{color:"#D4D4D4"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'          "builder"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'"@angular-devkit/build-angular:application"'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'          "options"'),s("span",{style:{color:"#D4D4D4"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'            "outputPath"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'"dist/remult-angular-todo"'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'            "index"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'"src/index.html"'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'            "browser"'),s("span",{style:{color:"#D4D4D4"}},": "),s("span",{style:{color:"#CE9178"}},'"src/main.ts"'),s("span",{style:{color:"#D4D4D4"}},",")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#9CDCFE"}},'            "externalDependencies"'),s("span",{style:{color:"#D4D4D4"}},": [")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#CE9178"}},'              "fs"')]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#D4D4D4"}},"            ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#9CDCFE"}},'            "polyfills"'),s("span",{style:{color:"#D4D4D4"}},": [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#CE9178"}},'              "zone.js"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D4D4D4"}},"            ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A9955"}},"            //...")])])])])])],-1),w=p("",14);function A(_,k,x,T,P,j){const a=e("PluginTabsTab"),t=e("PluginTabs");return D(),r("div",null,[y,o(t,null,{default:n(()=>[o(a,{label:"vite"},{default:n(()=>[d,C,u,h,f,E,g]),_:1}),o(a,{label:"Webpack and Angular version <=16"},{default:n(()=>[m,F,b]),_:1}),o(a,{label:"Angular 17"},{default:n(()=>[v]),_:1})]),_:1}),w])}const q=c(i,[["render",A]]);export{S as __pageData,q as default};
